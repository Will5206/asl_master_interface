{"remainingRequest":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will5206/Desktop/master_interface/src/components/Timeline.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/will5206/Desktop/master_interface/src/components/Timeline.vue","mtime":1705646185482},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/babel-loader/lib/index.js","mtime":1704319707261},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js","mtime":1704319707297}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiVGltZWxpbmUiLAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdGFydFg6IC0xLAogICAgICBlbmRYOiAtMSwKICAgICAgb2Zmc2V0WDogMCwKICAgICAgYnV0dG9uV2lkdGg6IC0xLAogICAgICBpbml0aWFsTW91c2VYOiAtMSwKICAgICAgaW5pdGlhbFN0YXJ0WDogLTEsCiAgICAgIGluaXRpYWxFbmRYOiAtMSwKICAgICAgaW5pdGlhbFBvc2l0aW9uOiAtMSwKICAgICAgZHJhZ2dpbmdCbG9jazogZmFsc2UsCiAgICAgIGRyYWdnaW5nU3RhcnQ6IGZhbHNlLAogICAgICBkcmFnZ2luZ0VuZDogZmFsc2UsCiAgICAgIHNlbGVjdGlvbkVsOiBudWxsLAogICAgICByZWN0OiBudWxsLAogICAgICBoZWlnaHQ6IG51bGwsCiAgICAgIHdpZHRoOiBudWxsLAogICAgICBjYW52YXM6IG51bGwsCiAgICAgIGN0eDogbnVsbCwKICAgICAgaG93TWFueURyYXduOiAwLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBmcmFtZUJhc2VOYW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIHRoaXMuc2V0dXBCYWNrZ3JvdW5kKCk7CiAgICB9LAogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2FudmFzID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImJnLWNhbnZhcyIpOwogICAgdGhpcy5jdHggPSB0aGlzLmNhbnZhcy5nZXRDb250ZXh0KCIyZCIpOwoKICAgIHRoaXMuc2VsZWN0aW9uRWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2VsZWN0aW9uIik7CgogICAgdGhpcy51cGRhdGVXaWR0aERlZnMoKTsKICAgIHRoaXMuc2V0dXBCYWNrZ3JvdW5kKCk7IC8vIGZpcnN0IHRpbWUKICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzdGFydCIpOwogICAgdGhpcy5idXR0b25XaWR0aCA9IGVsLm9mZnNldFdpZHRoICogMjsKICAgIG5ldyBSZXNpemVPYnNlcnZlcih0aGlzLnVwZGF0ZVdpZHRoRGVmcykub2JzZXJ2ZSh0aGlzLiRlbCk7CgogICAgbGV0IHdpbmRvd1Jlc2l6ZTsKICAgIHdpbmRvdy5vbnJlc2l6ZSA9ICgpID0+IHsKICAgICAgY2xlYXJUaW1lb3V0KHdpbmRvd1Jlc2l6ZSk7CiAgICAgIC8vIHdpbGwgb25seSByZWRyYXcgYmcgaWYgdGhlcmUgd2FzIG5vIHJlc2l6ZSBpbiA1MG1zCiAgICAgIC8vIGFzIHBlciBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNTQ5MDAyMS84ODgwOTQKICAgICAgd2luZG93UmVzaXplID0gc2V0VGltZW91dCh0aGlzLnNldHVwQmFja2dyb3VuZCwgNTApOwogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjYW5TaG93UGhhbnRvbVRpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuICF0aGlzLmRyYWdnaW5nQmxvY2sgJiYgIXRoaXMuZHJhZ2dpbmdTdGFydCAmJiAhdGhpcy5kcmFnZ2luZ0VuZDsKICAgIH0sCiAgICBzaG93bkR1cmF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLmR1cmF0aW9uID09IC0xIHx8CiAgICAgICAgdGhpcy5zdGFydFggPT0gLTEgfHwKICAgICAgICB0aGlzLmVuZFggPT0gLTEgfHwKICAgICAgICAhdGhpcy5kdXJhdGlvbgogICAgICApIHsKICAgICAgICByZXR1cm4gWyIiLCAiIiwgIiIsICIiXTsKICAgICAgfQogICAgICByZXR1cm4gWwogICAgICAgICIwIiwKICAgICAgICBNYXRoLnJvdW5kKHRoaXMuZHVyYXRpb24pLAogICAgICAgICh0aGlzLnN0YXJ0WCAqIHRoaXMuZHVyYXRpb24pLnRvRml4ZWQoMSksCiAgICAgICAgKHRoaXMuZW5kWCAqIHRoaXMuZHVyYXRpb24pLnRvRml4ZWQoMSksCiAgICAgIF07CiAgICB9LAogICAgbGVmdEJvdW5kYXJ5UG9zaXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImxlZnQtYm91bmRhcnkiKSwKICAgICAgICBsZWZ0ID0gdGhpcy5zdGFydFggKiB0aGlzLndpZHRoOwogICAgICBpZiAoIWVsIHx8IGxlZnQgPD0gZWwub2Zmc2V0V2lkdGgpIHsKICAgICAgICByZXR1cm4gImlubmVyIjsKICAgICAgfQogICAgICByZXR1cm4gIm91dGVyIjsKICAgIH0sCiAgICByaWdodEJvdW5kYXJ5UG9zaXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgbGV0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInJpZ2h0LWJvdW5kYXJ5IiksCiAgICAgICAgcmlnaHQgPSAoMSAtIHRoaXMuZW5kWCkgKiB0aGlzLndpZHRoOwogICAgICBpZiAoIWVsIHx8IHJpZ2h0IDw9IGVsLm9mZnNldFdpZHRoKSB7CiAgICAgICAgcmV0dXJuICJpbm5lciI7CiAgICAgIH0KICAgICAgcmV0dXJuICJvdXRlciI7CiAgICB9LAogICAgdGlja1Bvc2l0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghdGhpcy53aWR0aCB8fCAhdGhpcy5yZWN0KSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICAgIGlmICh0aGlzLmRyYWdnaW5nU3RhcnQgfHwgdGhpcy5kcmFnZ2luZ0VuZCkgewogICAgICAgIHJldHVybiBgJHt0aGlzLmluaXRpYWxQb3NpdGlvbiAqIDEwMH0lYDsKICAgICAgfQogICAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGlvbiAqIDEwMH0lYDsKICAgIH0sCiAgICBzdGFydFA6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhcnRYIC8gdGhpcy53aWR0aDsKICAgIH0sCiAgICBlbmRQOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLmVuZFggLyB0aGlzLndpZHRoOwogICAgfSwKICAgIGJhY2tncm91bmRPZmZzZXQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnRYIDwgdGhpcy5lbmRYKSB7CiAgICAgICAgcmV0dXJuIC0odGhpcy5zdGFydFggKiB0aGlzLndpZHRoKSArICJweCI7CiAgICAgIH0KICAgICAgcmV0dXJuIC0odGhpcy5lbmRYICogdGhpcy53aWR0aCkgKyAicHgiOwogICAgfSwKICAgIGxlZnRQb3M6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhcnRYIDwgdGhpcy5lbmRYKSB7CiAgICAgICAgcmV0dXJuIGBjYWxjKCR7dGhpcy5zdGFydFggKiAxMDB9JSlgOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmVuZFggKiAxMDAgKyAiJSI7CiAgICB9LAogICAgcmlnaHRQb3M6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KICAgICAgaWYgKHRoaXMuZW5kWCA+IHRoaXMuc3RhcnRYKSB7CiAgICAgICAgcmV0dXJuICgxIC0gdGhpcy5lbmRYKSAqIDEwMCArICIlIjsKICAgICAgfQogICAgICByZXR1cm4gKDEgLSB0aGlzLnN0YXJ0WCkgKiAxMDAgKyAiJSI7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgcmVzZXRTZWxlY3Rpb246IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zdGFydFggPSAwOwogICAgICB0aGlzLmVuZFggPSAxOwogICAgICB0aGlzLmVuZEFsbERyYWdnaW5nKCk7CiAgICB9LAogICAgc2V0dXBCYWNrZ3JvdW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCBkZXNpcmVkV2lkdGggPSBNYXRoLm1heCg5NiwgTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gdGhpcy5kdXJhdGlvbikpLCAvLyBvbmUgZnJhbWUgcGVyIHNlY29uZCwgd2l0aCBtaW4gd2lkdGggb2YgNDguCiAgICAgICAgaGVpZ2h0ID0gKGRlc2lyZWRXaWR0aCAqIDkpIC8gMTYsCiAgICAgICAgb2Zmc2V0WSA9IE1hdGgubWF4KDAsICh0aGlzLiRlbC5vZmZzZXRIZWlnaHQgLSBoZWlnaHQpIC8gMiAtIDQpLAogICAgICAgIG1heEluZGV4ID0gdGhpcy5mcmFtZU51bWJlciwKICAgICAgICBtaW5JbmRleCA9IDEsCiAgICAgICAgY291bnQgPSBNYXRoLmZsb29yKHRoaXMud2lkdGggLyBkZXNpcmVkV2lkdGgpLAogICAgICAgIGRpZmYgPSAodGhpcy53aWR0aCAtIGNvdW50ICogZGVzaXJlZFdpZHRoKSAvIChjb3VudCAtIDEpOwoKICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpOwogICAgICB0aGlzLmhvd01hbnlEcmF3biA9IDA7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkrKykgewogICAgICAgIGxldCBpbmRleCA9CiAgICAgICAgICBNYXRoLmZsb29yKChpIC8gY291bnQpICogKG1heEluZGV4IC0gbWluSW5kZXgpICsgbWluSW5kZXgpICsgIiI7CiAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpOwogICAgICAgIGxldCBwYXRoID0gYC9mcmFtZXMvJHt0aGlzLmZyYW1lQmFzZU5hbWV9JHtpbmRleC5wYWRTdGFydCgzLCAiMCIpfS5qcGdgOwogICAgICAgIGltZy5zcmMgPSBwYXRoOwogICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiB7CiAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoCiAgICAgICAgICAgIGltZywKICAgICAgICAgICAgaSAqIChkZXNpcmVkV2lkdGggKyBkaWZmKSwKICAgICAgICAgICAgb2Zmc2V0WSwKICAgICAgICAgICAgZGVzaXJlZFdpZHRoLAogICAgICAgICAgICBoZWlnaHQKICAgICAgICAgICk7CiAgICAgICAgICB0aGlzLmhvd01hbnlEcmF3bisrOwoKICAgICAgICAgIC8vIGlzIHRoaXMgdGhlIGxhc3QgY2FsbCBiYWNrPwogICAgICAgICAgaWYgKHRoaXMuaG93TWFueURyYXduID09IGNvdW50KSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0aW9uRWwuc3R5bGUuYmFja2dyb3VuZCA9IGB1cmwoJHt0aGlzLmNhbnZhcy50b0RhdGFVUkwoKX0pYDsKICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gInJnYmEoMCwwLDAsMC42NikiOwogICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLCAwLCB0aGlzLndpZHRoLCB0aGlzLmhlaWdodCk7CiAgICAgICAgICAgIHRoaXMuJGVsLnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCR7dGhpcy5jYW52YXMudG9EYXRhVVJMKCl9KWA7CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVdpZHRoRGVmczogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLnJlY3QgPSB0aGlzLiRlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTsKICAgICAgaWYgKHRoaXMuc3RhcnRYID09IC0xKSB7CiAgICAgICAgdGhpcy5zdGFydFggPSAwOwogICAgICAgIHRoaXMuZW5kWCA9IDE7CiAgICAgIH0KICAgICAgaWYgKHRoaXMud2lkdGggPT0gbnVsbCkgewogICAgICAgIHRoaXMud2lkdGggPSB0aGlzLiRlbC5vZmZzZXRXaWR0aDsKICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuJGVsLm9mZnNldEhlaWdodDsKICAgICAgfSBlbHNlIHsKICAgICAgICBsZXQgbmV3V2lkdGggPSB0aGlzLiRlbC5vZmZzZXRXaWR0aDsKCiAgICAgICAgdGhpcy53aWR0aCA9IG5ld1dpZHRoOwogICAgICAgIHRoaXMuaGVpZ2h0ID0gdGhpcy4kZWwub2Zmc2V0SGVpZ2h0OwogICAgICB9CiAgICB9LAogICAgbW91c2VVcDogZnVuY3Rpb24gKGUpIHsKICAgICAgaWYgKAogICAgICAgICF0aGlzLmRyYWdnaW5nU3RhcnQgJiYKICAgICAgICAhdGhpcy5kcmFnZ2luZ0VuZCAmJgogICAgICAgICghdGhpcy5kcmFnZ2luZ0Jsb2NrIHx8IHRoaXMuaW5pdGlhbE1vdXNlWCA9PSBlLmNsaWVudFgpCiAgICAgICkgewogICAgICAgIHRoaXMuJGVtaXQoCiAgICAgICAgICAiY2hhbmdlLXBvc2l0aW9uIiwKICAgICAgICAgIChlLmNsaWVudFggLSB0aGlzLnJlY3QubGVmdCkgLyB0aGlzLndpZHRoCiAgICAgICAgKTsKICAgICAgfQogICAgICB0aGlzLmVuZEFsbERyYWdnaW5nKCk7CiAgICB9LAogICAgZW5kQWxsRHJhZ2dpbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMuZHJhZ2dpbmdTdGFydCB8fCB0aGlzLmRyYWdnaW5nRW5kKSB7CiAgICAgICAgLy8gbW92ZXMgdGhlIHRpY2tlciBiYWNrIHRvIHdoZXJldmVyIGl0IHdhcwogICAgICAgIHRoaXMuJGVtaXQoImNoYW5nZS1wb3NpdGlvbiIsIHRoaXMuaW5pdGlhbFBvc2l0aW9uKTsKICAgICAgfQogICAgICB0aGlzLmRyYWdnaW5nU3RhcnQgPSBmYWxzZTsKICAgICAgdGhpcy5kcmFnZ2luZ0VuZCA9IGZhbHNlOwogICAgICB0aGlzLmRyYWdnaW5nQmxvY2sgPSBmYWxzZTsKCiAgICAgIGxldCBib3VuZGFyaWVzID0geyBzdGFydDogdGhpcy5zdGFydFgsIGVuZDogdGhpcy5lbmRYIH07CiAgICAgIHRoaXMuJGVtaXQoImNoYW5nZSIsIGJvdW5kYXJpZXMpOwogICAgfSwKICAgIHN0YXJ0RHJhZ2dpbmdCbG9jazogZnVuY3Rpb24gKGUpIHsKICAgICAgdGhpcy5pbml0aWFsTW91c2VYID0gZS5jbGllbnRYOwogICAgICB0aGlzLmluaXRpYWxTdGFydFggPSB0aGlzLnN0YXJ0WDsKICAgICAgdGhpcy5pbml0aWFsRW5kWCA9IHRoaXMuZW5kWDsKICAgICAgdGhpcy5pbml0aWFsUG9zaXRpb24gPSB0aGlzLnBvc2l0aW9uOwogICAgICB0aGlzLmRyYWdnaW5nQmxvY2sgPSB0cnVlOwogICAgfSwKICAgIHN0YXJ0RHJhZ2dpbmdTdGFydDogZnVuY3Rpb24gKGUpIHsKICAgICAgbGV0IGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInN0YXJ0Iik7CiAgICAgIGxldCBib3VuZCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICB0aGlzLm9mZnNldFggPSBlLmNsaWVudFggLSBib3VuZC5sZWZ0OwogICAgICB0aGlzLmRyYWdnaW5nU3RhcnQgPSB0cnVlOwogICAgfSwKICAgIHN0YXJ0RHJhZ2dpbmdFbmQ6IGZ1bmN0aW9uIChlKSB7CiAgICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJlbmQiKTsKICAgICAgbGV0IGJvdW5kID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgIHRoaXMub2Zmc2V0WCA9IGUuY2xpZW50WCAtIGJvdW5kLnJpZ2h0OwogICAgICB0aGlzLmRyYWdnaW5nRW5kID0gdHJ1ZTsKICAgIH0sCiAgICBtb3VzZU1vdmU6IGZ1bmN0aW9uIChldmVudCkgewogICAgICBsZXQgeCA9IGV2ZW50LmNsaWVudFggLSB0aGlzLnJlY3QubGVmdCAtIHRoaXMub2Zmc2V0WDsKICAgICAgaWYgKHRoaXMuZHJhZ2dpbmdTdGFydCkgewogICAgICAgIGlmICgoeCArIHRoaXMuYnV0dG9uV2lkdGgpIC8gdGhpcy53aWR0aCA8IHRoaXMuZW5kWCkgewogICAgICAgICAgdGhpcy5zdGFydFggPSBNYXRoLm1heCh4IC8gdGhpcy53aWR0aCwgMCk7CiAgICAgICAgICB0aGlzLiRlbWl0KCJjaGFuZ2UtcG9zaXRpb24iLCB0aGlzLnN0YXJ0WCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHRoaXMuZHJhZ2dpbmdFbmQpIHsKICAgICAgICBpZiAoKHggLSB0aGlzLmJ1dHRvbldpZHRoKSAvIHRoaXMud2lkdGggPiB0aGlzLnN0YXJ0WCkgewogICAgICAgICAgdGhpcy5lbmRYID0gTWF0aC5taW4oeCAvIHRoaXMud2lkdGgsIDEpOwogICAgICAgICAgdGhpcy4kZW1pdCgiY2hhbmdlLXBvc2l0aW9uIiwgdGhpcy5lbmRYKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy5kcmFnZ2luZ0Jsb2NrKSB7CiAgICAgICAgbGV0IG9mZnNldCA9IHRoaXMuaW5pdGlhbE1vdXNlWCAtIGV2ZW50LmNsaWVudFg7CiAgICAgICAgbGV0IGNoYW5nZSA9IG9mZnNldCAvIHRoaXMud2lkdGg7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5pbml0aWFsU3RhcnRYIC0gY2hhbmdlID49IDAgJiYKICAgICAgICAgIHRoaXMuaW5pdGlhbEVuZFggLSBjaGFuZ2UgPD0gMQogICAgICAgICkgewogICAgICAgICAgdGhpcy5zdGFydFggPSB0aGlzLmluaXRpYWxTdGFydFggLSBjaGFuZ2U7CiAgICAgICAgICB0aGlzLmVuZFggPSB0aGlzLmluaXRpYWxFbmRYIC0gY2hhbmdlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyB0aGlzIGlzIGp1c3Qgc28gd2UgZG9uJ3QgaGF2ZSBhIHZlcnkgc21hbGwgbGVmdCBvdmVyIHZhbHVlIGVpdGhlciBhdCB0aGUgc3RhcnQgb3IgZW5kCiAgICAgICAgICBpZiAodGhpcy5pbml0aWFsU3RhcnRYIC0gY2hhbmdlIDw9IDApIHsKICAgICAgICAgICAgdGhpcy5lbmRYIC09IHRoaXMuc3RhcnRYOwogICAgICAgICAgICB0aGlzLnN0YXJ0WCA9IDA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLnN0YXJ0WCAtPSAxIC0gdGhpcy5lbmRYOwogICAgICAgICAgICB0aGlzLmVuZFggPSAxOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBwaGFudG9tIHRpY2sKICAgICAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicGhhbnRvbS10aWNrIik7CiAgICAgICAgZWwuc3R5bGUubGVmdCA9CiAgICAgICAgICAoKGV2ZW50LmNsaWVudFggLSB0aGlzLnJlY3QubGVmdCkgLyB0aGlzLndpZHRoKSAqIDEwMCArICIlIjsKICAgICAgfQogICAgfSwKICB9LAogIHByb3BzOiB7CiAgICBmcmFtZUJhc2VOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogImZyYW1lIiwKICAgIH0sCiAgICBmcmFtZU51bWJlcjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IDEwMCwKICAgIH0sCiAgICBkdXJhdGlvbjogewogICAgICB0eXBlOiBOdW1iZXIsCiAgICAgIGRlZmF1bHQ6IC0xLAogICAgfSwKICAgIHBsYXlpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgcG9zaXRpb246IHsKICAgICAgdHlwZTogTnVtYmVyLAogICAgICBkZWZhdWx0OiAwLAogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["Timeline.vue"],"names":[],"mappings":";AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Timeline.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div\n    id=\"timeline\"\n    @mousemove=\"mouseMove\"\n    @mouseup=\"mouseUp\"\n    @mouseleave=\"endAllDragging\"\n  >\n    <canvas id=\"bg-canvas\" :width=\"width\" :height=\"height\" />\n    <div\n      id=\"selection\"\n      :class=\"{ dragging: draggingBlock }\"\n      :style=\"{\n        left: leftPos,\n        right: rightPos,\n        backgroundPositionX: backgroundOffset,\n        backgroundPositionY: `-2px`,\n      }\"\n      @mousedown=\"startDraggingBlock\"\n    >\n      <button\n        id=\"start\"\n        class=\"selection-boundary\"\n        @mousedown=\"startDraggingStart\"\n      />\n      <button\n        id=\"end\"\n        class=\"selection-boundary\"\n        @mousedown=\"startDraggingEnd\"\n      />\n    </div>\n    <div\n      id=\"main-tick\"\n      class=\"tick\"\n      :class=\"{\n        playing: playing,\n        'ticker-elsewhere': draggingStart || draggingEnd,\n      }\"\n      :style=\"{ left: tickPosition }\"\n    />\n    <div\n      id=\"phantom-tick\"\n      class=\"tick\"\n      :class=\"{ 'can-show': canShowPhantomTick }\"\n    />\n    <p class=\"duration start\">{{ shownDuration[0] }}</p>\n    <p class=\"duration end\">{{ shownDuration[1] }}</p>\n    <p\n      id=\"left-boundary\"\n      class=\"duration boundary left\"\n      :class=\"leftBoundaryPosition\"\n      :style=\"{ left: leftPos }\"\n    >\n      {{ shownDuration[2] }}\n    </p>\n    <p\n      id=\"right-boundary\"\n      class=\"duration boundary right\"\n      :class=\"rightBoundaryPosition\"\n      :style=\"{ right: rightPos }\"\n    >\n      {{ shownDuration[3] }}\n    </p>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"Timeline\",\n  data() {\n    return {\n      startX: -1,\n      endX: -1,\n      offsetX: 0,\n      buttonWidth: -1,\n      initialMouseX: -1,\n      initialStartX: -1,\n      initialEndX: -1,\n      initialPosition: -1,\n      draggingBlock: false,\n      draggingStart: false,\n      draggingEnd: false,\n      selectionEl: null,\n      rect: null,\n      height: null,\n      width: null,\n      canvas: null,\n      ctx: null,\n      howManyDrawn: 0,\n    };\n  },\n  watch: {\n    frameBaseName: function () {\n      this.setupBackground();\n    },\n  },\n  mounted() {\n    this.canvas = document.getElementById(\"bg-canvas\");\n    this.ctx = this.canvas.getContext(\"2d\");\n\n    this.selectionEl = document.getElementById(\"selection\");\n\n    this.updateWidthDefs();\n    this.setupBackground(); // first time\n    let el = document.getElementById(\"start\");\n    this.buttonWidth = el.offsetWidth * 2;\n    new ResizeObserver(this.updateWidthDefs).observe(this.$el);\n\n    let windowResize;\n    window.onresize = () => {\n      clearTimeout(windowResize);\n      // will only redraw bg if there was no resize in 50ms\n      // as per https://stackoverflow.com/a/5490021/888094\n      windowResize = setTimeout(this.setupBackground, 50);\n    };\n  },\n  computed: {\n    canShowPhantomTick: function () {\n      return !this.draggingBlock && !this.draggingStart && !this.draggingEnd;\n    },\n    shownDuration: function () {\n      if (\n        this.duration == -1 ||\n        this.startX == -1 ||\n        this.endX == -1 ||\n        !this.duration\n      ) {\n        return [\"\", \"\", \"\", \"\"];\n      }\n      return [\n        \"0\",\n        Math.round(this.duration),\n        (this.startX * this.duration).toFixed(1),\n        (this.endX * this.duration).toFixed(1),\n      ];\n    },\n    leftBoundaryPosition: function () {\n      let el = document.getElementById(\"left-boundary\"),\n        left = this.startX * this.width;\n      if (!el || left <= el.offsetWidth) {\n        return \"inner\";\n      }\n      return \"outer\";\n    },\n    rightBoundaryPosition: function () {\n      let el = document.getElementById(\"right-boundary\"),\n        right = (1 - this.endX) * this.width;\n      if (!el || right <= el.offsetWidth) {\n        return \"inner\";\n      }\n      return \"outer\";\n    },\n    tickPosition: function () {\n      if (!this.width || !this.rect) {\n        return \"\";\n      }\n      if (this.draggingStart || this.draggingEnd) {\n        return `${this.initialPosition * 100}%`;\n      }\n      return `${this.position * 100}%`;\n    },\n    startP: function () {\n      return this.startX / this.width;\n    },\n    endP: function () {\n      return this.endX / this.width;\n    },\n    backgroundOffset: function () {\n      if (!this.rect) {\n        return \"\";\n      }\n      if (this.startX < this.endX) {\n        return -(this.startX * this.width) + \"px\";\n      }\n      return -(this.endX * this.width) + \"px\";\n    },\n    leftPos: function () {\n      if (!this.rect) {\n        return \"\";\n      }\n      if (this.startX < this.endX) {\n        return `calc(${this.startX * 100}%)`;\n      }\n      return this.endX * 100 + \"%\";\n    },\n    rightPos: function () {\n      if (!this.rect) {\n        return \"\";\n      }\n      if (this.endX > this.startX) {\n        return (1 - this.endX) * 100 + \"%\";\n      }\n      return (1 - this.startX) * 100 + \"%\";\n    },\n  },\n  methods: {\n    resetSelection: function () {\n      this.startX = 0;\n      this.endX = 1;\n      this.endAllDragging();\n    },\n    setupBackground: function () {\n      let desiredWidth = Math.max(96, Math.floor(this.width / this.duration)), // one frame per second, with min width of 48.\n        height = (desiredWidth * 9) / 16,\n        offsetY = Math.max(0, (this.$el.offsetHeight - height) / 2 - 4),\n        maxIndex = this.frameNumber,\n        minIndex = 1,\n        count = Math.floor(this.width / desiredWidth),\n        diff = (this.width - count * desiredWidth) / (count - 1);\n\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      this.howManyDrawn = 0;\n      for (let i = 0; i < count; i++) {\n        let index =\n          Math.floor((i / count) * (maxIndex - minIndex) + minIndex) + \"\";\n        let img = new Image();\n        let path = `/frames/${this.frameBaseName}${index.padStart(3, \"0\")}.jpg`;\n        img.src = path;\n        img.onload = () => {\n          this.ctx.drawImage(\n            img,\n            i * (desiredWidth + diff),\n            offsetY,\n            desiredWidth,\n            height\n          );\n          this.howManyDrawn++;\n\n          // is this the last call back?\n          if (this.howManyDrawn == count) {\n            this.selectionEl.style.background = `url(${this.canvas.toDataURL()})`;\n            this.ctx.fillStyle = \"rgba(0,0,0,0.66)\";\n            this.ctx.fillRect(0, 0, this.width, this.height);\n            this.$el.style.background = `url(${this.canvas.toDataURL()})`;\n          }\n        };\n      }\n    },\n    updateWidthDefs: function () {\n      this.rect = this.$el.getBoundingClientRect();\n      if (this.startX == -1) {\n        this.startX = 0;\n        this.endX = 1;\n      }\n      if (this.width == null) {\n        this.width = this.$el.offsetWidth;\n        this.height = this.$el.offsetHeight;\n      } else {\n        let newWidth = this.$el.offsetWidth;\n\n        this.width = newWidth;\n        this.height = this.$el.offsetHeight;\n      }\n    },\n    mouseUp: function (e) {\n      if (\n        !this.draggingStart &&\n        !this.draggingEnd &&\n        (!this.draggingBlock || this.initialMouseX == e.clientX)\n      ) {\n        this.$emit(\n          \"change-position\",\n          (e.clientX - this.rect.left) / this.width\n        );\n      }\n      this.endAllDragging();\n    },\n    endAllDragging: function () {\n      if (this.draggingStart || this.draggingEnd) {\n        // moves the ticker back to wherever it was\n        this.$emit(\"change-position\", this.initialPosition);\n      }\n      this.draggingStart = false;\n      this.draggingEnd = false;\n      this.draggingBlock = false;\n\n      let boundaries = { start: this.startX, end: this.endX };\n      this.$emit(\"change\", boundaries);\n    },\n    startDraggingBlock: function (e) {\n      this.initialMouseX = e.clientX;\n      this.initialStartX = this.startX;\n      this.initialEndX = this.endX;\n      this.initialPosition = this.position;\n      this.draggingBlock = true;\n    },\n    startDraggingStart: function (e) {\n      let el = document.getElementById(\"start\");\n      let bound = el.getBoundingClientRect();\n      this.offsetX = e.clientX - bound.left;\n      this.draggingStart = true;\n    },\n    startDraggingEnd: function (e) {\n      let el = document.getElementById(\"end\");\n      let bound = el.getBoundingClientRect();\n      this.offsetX = e.clientX - bound.right;\n      this.draggingEnd = true;\n    },\n    mouseMove: function (event) {\n      let x = event.clientX - this.rect.left - this.offsetX;\n      if (this.draggingStart) {\n        if ((x + this.buttonWidth) / this.width < this.endX) {\n          this.startX = Math.max(x / this.width, 0);\n          this.$emit(\"change-position\", this.startX);\n        }\n      } else if (this.draggingEnd) {\n        if ((x - this.buttonWidth) / this.width > this.startX) {\n          this.endX = Math.min(x / this.width, 1);\n          this.$emit(\"change-position\", this.endX);\n        }\n      } else if (this.draggingBlock) {\n        let offset = this.initialMouseX - event.clientX;\n        let change = offset / this.width;\n        if (\n          this.initialStartX - change >= 0 &&\n          this.initialEndX - change <= 1\n        ) {\n          this.startX = this.initialStartX - change;\n          this.endX = this.initialEndX - change;\n        } else {\n          // this is just so we don't have a very small left over value either at the start or end\n          if (this.initialStartX - change <= 0) {\n            this.endX -= this.startX;\n            this.startX = 0;\n          } else {\n            this.startX -= 1 - this.endX;\n            this.endX = 1;\n          }\n        }\n      } else {\n        // phantom tick\n        let el = document.getElementById(\"phantom-tick\");\n        el.style.left =\n          ((event.clientX - this.rect.left) / this.width) * 100 + \"%\";\n      }\n    },\n  },\n  props: {\n    frameBaseName: {\n      type: String,\n      default: \"frame\",\n    },\n    frameNumber: {\n      type: Number,\n      default: 100,\n    },\n    duration: {\n      type: Number,\n      default: -1,\n    },\n    playing: {\n      type: Boolean,\n      default: false,\n    },\n    position: {\n      type: Number,\n      default: 0,\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"@/assets/styles/_variables.scss\";\n@import \"@/assets/styles/_mixins.scss\";\n\n#timeline {\n  position: relative;\n  background-position-y: center;\n  background-repeat: no-repeat;\n  border: 2px solid #333;\n\n  &:hover {\n    // cursor: text;\n    #phantom-tick.can-show {\n      display: block;\n    }\n  }\n}\n\n$b: 2px;\n$p: 0px;\n$w: 4px;\n$m_w: 3;\n$br: 0.33rem;\n\n#selection {\n  position: absolute;\n  top: $p;\n  bottom: $p;\n  background-color: rgba(255, 255, 255, 0.33);\n  border-top: $b solid $accent;\n  border-bottom: $b solid $accent;\n  border-radius: $br;\n  z-index: 1;\n\n  cursor: grab;\n  &.dragging {\n    cursor: grabbing;\n  }\n}\n\n.selection-boundary {\n  position: absolute;\n  top: -$b;\n  bottom: -$b;\n\n  cursor: ew-resize;\n\n  border-width: 0;\n  border-color: $accent;\n  border-style: solid;\n\n  z-index: 3;\n  background-color: transparent;\n  padding: 0;\n  transition: border-width 0.33s ease;\n\n  width: $w * $m_w;\n  &:hover {\n    width: $w * ($m_w + 1);\n  }\n\n  &#start {\n    border-left-width: $w;\n    border-top-left-radius: $br;\n    border-bottom-left-radius: $br;\n    &:hover {\n      border-left-width: $w * $m_w;\n    }\n  }\n  &#end {\n    right: 0;\n    border-right-width: $w;\n    border-top-right-radius: $br;\n    border-bottom-right-radius: $br;\n    &:hover {\n      border-right-width: $w * $m_w;\n    }\n  }\n}\n\n.tick {\n  position: absolute;\n  pointer-events: none;\n  opacity: 1;\n  z-index: 4;\n}\n\n#phantom-tick {\n  top: 0;\n  bottom: 0;\n  z-index: 3;\n  width: 1px;\n  border-left: 1px dotted rgba(255, 255, 255, 0.5);\n\n  display: none;\n}\n\n#main-tick {\n  top: -3px;\n  bottom: -3px;\n  width: 3px;\n  border-radius: 4px;\n  transform: translateX(-1px);\n  background-color: white;\n  border-left: 1px solid white;\n  border-right: 1px solid white;\n\n  transition: opacity 0.5s ease;\n\n  &.ticker-elsewhere {\n    opacity: 0.2;\n  }\n}\n\n.duration {\n  position: absolute;\n  user-select: none;\n  @include fs(-2);\n  font-weight: 450;\n  color: #ddd;\n  &.start,\n  &.end {\n    top: -24px;\n  }\n  &.boundary {\n    font-weight: 700;\n    top: 50%;\n    z-index: 4;\n    &.left {\n      transform: translateY(-50%) translateX(calc(-100% - 0.5ch));\n    }\n    &.left.inner {\n      transform: translateY(-50%) translateX(calc(0.5ch + 12px));\n    }\n    &.right {\n      transform: translateY(-50%) translateX(calc(100% + 0.5ch));\n    }\n    &.right.inner {\n      transform: translateY(-50%) translateX(calc(-0.5ch - 12px));\n    }\n    color: $accent;\n  }\n  &.start {\n    left: 0;\n  }\n  &.end {\n    right: 0;\n  }\n  &.boundary {\n  }\n}\n\ncanvas {\n  display: none;\n}\n</style>\n"]}]}