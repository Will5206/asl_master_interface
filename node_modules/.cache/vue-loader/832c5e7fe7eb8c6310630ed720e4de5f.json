{"remainingRequest":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will5206/Desktop/master_interface/src/views/SpanSelection.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/will5206/Desktop/master_interface/src/views/SpanSelection.vue","mtime":1704323184341},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/babel-loader/lib/index.js","mtime":1704319707261},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js","mtime":1704319707297}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB2aWRlb2pzIGZyb20gInZpZGVvLmpzIjsKaW1wb3J0IFRpbWVsaW5lIGZyb20gIi4uL2NvbXBvbmVudHMvVGltZWxpbmUudnVlIjsKaW1wb3J0IFZpZGVvQ29udHJvbHMgZnJvbSAiLi4vY29tcG9uZW50cy9WaWRlb0NvbnRyb2xzLnZ1ZSI7CmltcG9ydCBTZWFyY2ggZnJvbSAiLi4vY29tcG9uZW50cy9TZWFyY2gudnVlIjsKaW1wb3J0IEN1c3RvbUJ1dHRvbiBmcm9tICIuLi9jb21wb25lbnRzL0N1c3RvbUJ1dHRvbi52dWUiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJTcGFuU2VsZWN0aW9uIiwKICBjb21wb25lbnRzOiB7IFRpbWVsaW5lLCBWaWRlb0NvbnRyb2xzLCBTZWFyY2gsIEN1c3RvbUJ1dHRvbiB9LAogIHByb3BzOiB7CiAgICBvcHRpb25zOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLAogICAgICAgICAgY29udHJvbHM6IGZhbHNlLAogICAgICAgICAgZmlsbDogdHJ1ZSwKICAgICAgICAgIHNvdXJjZXM6IFtdLAogICAgICAgIH07CiAgICAgIH0sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBsYXlpbmc6IGZhbHNlLAogICAgICBzaG93UmVzdWx0czogZmFsc2UsCiAgICAgIGludGVydmFsOiBudWxsLAogICAgICB0aW1lbGluZVNlbGVjdGlvbjogeyBzdGFydDogMCwgZW5kOiAxIH0sCiAgICAgIHBsYXllcjogbnVsbCwKICAgICAgc3RvcEF0U2VsZWN0aW9uOiBmYWxzZSwKICAgICAgdmlkZW9Qb3NpdGlvbjogMCwKICAgICAgZXhwZXJpbWVudGFsU2V0dXA6IG51bGwsCiAgICAgIGN1cnJlbnRTdGVwOiAwLAogICAgICBzY3JhdGNocGFkOiAiIiwKICAgICAgc2lnbnM6IFtdLAogICAgICBsYXRpblNxdWFyZTogW10sCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlU2VsZWN0aW9uOiBmdW5jdGlvbiAobmV3Qm91bmRhcmllcykgewogICAgICBpZiAoCiAgICAgICAgdGhpcy50aW1lbGluZVNlbGVjdGlvbi5zdGFydCAhPSBuZXdCb3VuZGFyaWVzLnN0YXJ0IHx8CiAgICAgICAgdGhpcy50aW1lbGluZVNlbGVjdGlvbi5lbmQgIT0gbmV3Qm91bmRhcmllcy5lbmQKICAgICAgKSB7CiAgICAgICAgdGhpcy50aW1lbGluZVNlbGVjdGlvbiA9IG5ld0JvdW5kYXJpZXM7CiAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigidXBkYXRlX3NlbGVjdGlvbiIsIHsKICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgIHN0YXJ0OiB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLnN0YXJ0ICogdGhpcy5kdXJhdGlvbiwKICAgICAgICAgIGVuZDogdGhpcy50aW1lbGluZVNlbGVjdGlvbi5lbmQgKiB0aGlzLmR1cmF0aW9uLAogICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgY2hhbmdlVGljazogZnVuY3Rpb24gKG5ld1Bvc2l0aW9uKSB7CiAgICAgIHRoaXMucGxheWVyLmN1cnJlbnRUaW1lKG5ld1Bvc2l0aW9uICogdGhpcy5kdXJhdGlvbik7CiAgICAgIHRoaXMudmlkZW9Qb3NpdGlvbiA9IG5ld1Bvc2l0aW9uOwogICAgICB0aGlzLiRzYXZlQWN0aW9uKCJuZXdfcG9zaXRpb24iLCB7CiAgICAgICAgY3VycmVudF9zdGVwOiB0aGlzLmN1cnJlbnRTdGVwLAogICAgICAgIHBvc2l0aW9uOiB0aGlzLnZpZGVvUG9zaXRpb24gKiB0aGlzLmR1cmF0aW9uLAogICAgICB9KTsKICAgIH0sCiAgICBnZW5lcmFsUGxheTogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5wbGF5ZXIpIHsKICAgICAgICBpZiAodGhpcy5wbGF5aW5nKSB7CiAgICAgICAgICB0aGlzLnBsYXllci5wYXVzZSgpOwogICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigicGF1c2VfY2xpY2siLCB7CiAgICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgICAgcG9zaXRpb246IHRoaXMudmlkZW9Qb3NpdGlvbiwKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnBsYXllci5wbGF5KCk7CiAgICAgICAgICB0aGlzLnN0b3BBdFNlbGVjdGlvbiA9IGZhbHNlOwogICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigicGxheV9jbGljayIsIHsKICAgICAgICAgICAgY3VycmVudF9zdGVwOiB0aGlzLmN1cnJlbnRTdGVwLAogICAgICAgICAgICBwb3NpdGlvbjogdGhpcy52aWRlb1Bvc2l0aW9uLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgc2VsZWN0aW9uUGxheTogZnVuY3Rpb24gKCkgewogICAgICBpZiAodGhpcy5wbGF5ZXIpIHsKICAgICAgICB0aGlzLiRzYXZlQWN0aW9uKCJwbGF5X3NlbGVjdGlvbl9jbGljayIsIHsKICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnZpZGVvUG9zaXRpb24sCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5wbGF5ZXIuY3VycmVudFRpbWUodGhpcy5zZWxlY3Rpb25TdGFydCk7CiAgICAgICAgdGhpcy5zdG9wQXRTZWxlY3Rpb24gPSB0cnVlOwogICAgICAgIGlmICghdGhpcy5wbGF5aW5nKSB7CiAgICAgICAgICB0aGlzLnBsYXllci5wbGF5KCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9hZEN1cnJlbnRTdGVwOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwID09IHRoaXMuZXhwZXJpbWVudGFsU2V0dXAubGVuZ3RoKSB7CiAgICAgICAgY29uc29sZS5sb2coIkZpbmlzaGVkIHRoZSBzZXF1ZW5jZSIpOwogICAgICAgIHRoaXMuJHNhdmVBY3Rpb24oImZpbmlzaGVkX2V4cGVyaW1lbnQiKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL3RoYW5rLXlvdSIpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuc2NyYXRjaHBhZCA9ICIiOwogICAgICAgIHRoaXMuJHNhdmVBY3Rpb24oInN0YXJ0ZWRfdmlkZW8iLCB7CiAgICAgICAgICBjdXJyZW50X3N0ZXA6IHRoaXMuY3VycmVudFN0ZXAsCiAgICAgICAgICB2aWRlbzoKICAgICAgICAgICAgdGhpcy5leHBlcmltZW50YWxTZXR1cFt0aGlzLmxhdGluU3F1YXJlW3RoaXMuY3VycmVudFN0ZXBdXS50aXRsZSwKICAgICAgICB9KTsKICAgICAgICAvLyBsb2FkcyBjdXJyZW50IHZpZGVvLi4uCiAgICAgICAgdGhpcy5wbGF5ZXIuc3JjKHsKICAgICAgICAgIHNyYzogdGhpcy5leHBlcmltZW50YWxTZXR1cFt0aGlzLmxhdGluU3F1YXJlW3RoaXMuY3VycmVudFN0ZXBdXQogICAgICAgICAgICAudmlkZW9fdXJsLAogICAgICAgICAgdHlwZTogInZpZGVvL21wNCIsCiAgICAgICAgfSk7CiAgICAgICAgbGV0IHNlYXJjaFBhbmVsID0gdGhpcy4kcmVmcy5zZWFyY2gsCiAgICAgICAgICB0aW1lbGluZSA9IHRoaXMuJHJlZnMudGltZWxpbmU7CiAgICAgICAgc2VhcmNoUGFuZWwucmVzZXRSZXN1bHRzKCk7CiAgICAgICAgdGltZWxpbmUucmVzZXRTZWxlY3Rpb24oKTsKICAgICAgICAvLyAuLi5hbmQgY3VycmVudCBwcmUtY29tcHV0ZWQgc2VhcmNoIHJlc3VsdHMKICAgICAgICBmZXRjaCgKICAgICAgICAgIHRoaXMuZXhwZXJpbWVudGFsU2V0dXBbdGhpcy5sYXRpblNxdWFyZVt0aGlzLmN1cnJlbnRTdGVwXV0uc2lnbnNfZGF0YSwKICAgICAgICAgIHsKICAgICAgICAgICAgbWV0aG9kOiAiR0VUIiwKICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICJDb250ZW50LVR5cGUiOiAiYXBwbGljYXRpb24vdGV4dCIsCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9CiAgICAgICAgKQogICAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAgICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgICAgICB0aGlzLnNpZ25zID0gSlNPTi5wYXJzZShkYXRhKS5zaWduczsKICAgICAgICAgIH0pCiAgICAgICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoIkVycm9yOiIsIGVycm9yKTsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogICAgYWR2YW5jZVN0ZXA6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5jdXJyZW50U3RlcCArPSAxOwogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCJ2aWRlbyIpLmZvckVhY2goKHZpZCkgPT4gdmlkLnBhdXNlKCkpOwogICAgICB0aGlzLiRzYXZlQWN0aW9uKCJuZXh0X3ZpZGVvIiwgeyBzY3JhdGNocGFkOiB0aGlzLnNjcmF0Y2hwYWQgfSk7CiAgICAgIHRoaXMubG9hZEN1cnJlbnRTdGVwKCk7CiAgICB9LAogICAgaGFuZGxlVXBsb2FkQ2xpY2soKSB7CiAgICAgIHRoaXMuJHJlZnMuZmlsZUlucHV0LmNsaWNrKCk7IC8vIFRyaWdnZXIgdGhlIGZpbGUgaW5wdXQKICAgIH0sCiAgICBoYW5kbGVGaWxlVXBsb2FkKGV2ZW50KSB7CiAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgIGNvbnNvbGUubG9nKGZpbGUpOwogICAgICAvLyBQcm9jZXNzIHRoZSBmaWxlIHVwbG9hZCBoZXJlCiAgICAgIC8vIFBhc3MgaXQgdG8gYSB2aWRlbyBwbGF5ZXIgb3IgdXBsb2FkIGl0IHRvIGEgc2VydmVyPwogICAgfSwKICB9LAogIGNvbXB1dGVkOiB7CiAgICBmcmFtZUJhc2VOYW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghdGhpcy5leHBlcmltZW50YWxTZXR1cCB8fCAhdGhpcy5sYXRpblNxdWFyZSkgewogICAgICAgIHJldHVybiAiZnJhbWUiOwogICAgICB9CiAgICAgIHJldHVybiB0aGlzLmV4cGVyaW1lbnRhbFNldHVwW3RoaXMubGF0aW5TcXVhcmVbdGhpcy5jdXJyZW50U3RlcF1dCiAgICAgICAgLmZyYW1lX2Jhc2VfbmFtZTsKICAgIH0sCiAgICBmcmFtZU51bWJlcjogZnVuY3Rpb24gKCkgewogICAgICBpZiAoIXRoaXMuZXhwZXJpbWVudGFsU2V0dXAgfHwgIXRoaXMubGF0aW5TcXVhcmUpIHsKICAgICAgICByZXR1cm4gMTsKICAgICAgfQogICAgICByZXR1cm4gcGFyc2VJbnQoCiAgICAgICAgdGhpcy5leHBlcmltZW50YWxTZXR1cFt0aGlzLmxhdGluU3F1YXJlW3RoaXMuY3VycmVudFN0ZXBdXS5mcmFtZV9udW1iZXIKICAgICAgKTsKICAgIH0sCiAgICBuZXh0U3RlcFRleHQ6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLmV4cGVyaW1lbnRhbFNldHVwIHx8ICF0aGlzLmxhdGluU3F1YXJlKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CiAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwIDwgdGhpcy5leHBlcmltZW50YWxTZXR1cC5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuICJOZXh0IHZpZGVvIjsKICAgICAgfQogICAgICByZXR1cm4gIkZpbmlzaCBleHBlcmltZW50IjsKICAgIH0sCiAgICBwbGF5aW5nU2VsZWN0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIGlmICghdGhpcy5wbGF5aW5nIHx8IHRoaXMuY3VycmVudFBlcmNlbnRhZ2UgPT0gLTEpIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuICgKICAgICAgICB0aGlzLmN1cnJlbnRQZXJjZW50YWdlID49IHRoaXMudGltZWxpbmVTZWxlY3Rpb24uc3RhcnQgJiYKICAgICAgICB0aGlzLmN1cnJlbnRQZXJjZW50YWdlIDw9IHRoaXMudGltZWxpbmVTZWxlY3Rpb24uZW5kCiAgICAgICk7CiAgICB9LAogICAgY3VycmVudFRpbWU6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyLmN1cnJlbnRUaW1lKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIDE7CiAgICB9LAogICAgY3VycmVudFBlcmNlbnRhZ2U6IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKCF0aGlzLnBsYXllcikgewogICAgICAgIHJldHVybiAtMTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5wbGF5ZXIuY3VycmVudFRpbWUoKSAvIHRoaXMucGxheWVyLmR1cmF0aW9uKCk7CiAgICB9LAogICAgZHVyYXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMucGxheWVyLmR1cmF0aW9uKCk7CiAgICAgIH0KICAgICAgcmV0dXJuIC0xOwogICAgfSwKICAgIHNlbGVjdGlvblN0YXJ0OiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLnN0YXJ0ICogdGhpcy5kdXJhdGlvbjsKICAgIH0sCiAgICBzZWxlY3Rpb25FbmQ6IGZ1bmN0aW9uICgpIHsKICAgICAgcmV0dXJuIHRoaXMudGltZWxpbmVTZWxlY3Rpb24uZW5kICogdGhpcy5kdXJhdGlvbjsKICAgIH0sCiAgICB0aWNrSW5zaWRlU2VsZWN0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA+PSB0aGlzLnNlbGVjdGlvblN0YXJ0ICYmCiAgICAgICAgdGhpcy5jdXJyZW50VGltZSA8PSB0aGlzLnNlbGVjdGlvbkVuZAogICAgICApOwogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICBmZXRjaCgiL2RhdGEvZXhwZXJpbWVudF9zZXR1cC5qc29uIiwgewogICAgICBtZXRob2Q6ICJHRVQiLAogICAgICBoZWFkZXJzOiB7CiAgICAgICAgIkNvbnRlbnQtVHlwZSI6ICJhcHBsaWNhdGlvbi90ZXh0IiwKICAgICAgfSwKICAgIH0pCiAgICAgIC50aGVuKChyZXNwb25zZSkgPT4gcmVzcG9uc2UudGV4dCgpKQogICAgICAudGhlbigoZGF0YSkgPT4gewogICAgICAgIHRoaXMuZXhwZXJpbWVudGFsU2V0dXAgPSBKU09OLnBhcnNlKGRhdGEpLnN0ZXBzOwogICAgICAgIHRoaXMuJHNhdmVBY3Rpb24oImVudGVyZWRfZXhwZXJpbWVudCIpOwoKICAgICAgICAvLyBjcmVhdGVzIGEgbGF0aW4gc3F1YXJlIHRoYXQgaXMgYWx3YXlzIHRoZSBzYW1lIGZvciB0aGlzIHVzZXIKICAgICAgICAvLyBmaXJzdCwgZmluZHMgdGhlIGZpcnN0IG51bWJlciBpbiB0aGUgdWlkLgogICAgICAgIGxldCBmb3VuZCA9IGZhbHNlLAogICAgICAgICAgb2Zmc2V0LAogICAgICAgICAgaSA9IDA7CiAgICAgICAgY29uc29sZS5sb2codGhpcy4kdWlkKTsKICAgICAgICB3aGlsZSAoIWZvdW5kKSB7CiAgICAgICAgICBpZiAoaXNOYU4ocGFyc2VJbnQodGhpcy4kdWlkW2ldKSkgJiYgaSA8IHRoaXMuJHVpZC5sZW5ndGgpIHsKICAgICAgICAgICAgaSsrOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgZm91bmQgPSB0cnVlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyB0aGVyZSB3ZXJlIG5vIG51bWJlcnMgaW5zaWRlIHRoZSB1aWQgKHZlcnkgdW5saWtlbHkhKSwgc28KICAgICAgICAvLyB3aWxsIGRlZmF1bHQgdG8gMAogICAgICAgIGlmIChpID09IHRoaXMuJHVpZC5sZW5ndGgpIHsKICAgICAgICAgIG9mZnNldCA9IDA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG9mZnNldCA9IHBhcnNlSW50KHRoaXMuJHVpZFtpXSk7CiAgICAgICAgfQoKICAgICAgICB0aGlzLmxhdGluU3F1YXJlLnB1c2goMCk7CiAgICAgICAgbGV0IHMgPSAiMCAiOwoKICAgICAgICAvLyBza2lwcyAwLCB3aGljaCBpcyB0aGUgZGVtby4gVGhpcydsbCBhbHdheXMgYmUgdGhlIGZpcnN0IHZpZGVvLgogICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdGhpcy5leHBlcmltZW50YWxTZXR1cC5sZW5ndGg7IGkrKykgewogICAgICAgICAgdGhpcy5sYXRpblNxdWFyZS5wdXNoKAogICAgICAgICAgICAoKGkgKyBvZmZzZXQpICUgKHRoaXMuZXhwZXJpbWVudGFsU2V0dXAubGVuZ3RoIC0gMSkpICsgMQogICAgICAgICAgKTsKICAgICAgICAgIHMgKz0gdGhpcy5sYXRpblNxdWFyZVtpXSArICIgIjsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKGBpbmRleGVzOiAke3N9YCk7CiAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigiY3JlYXRlZF9sYXRpbl9zcXVhcmUiLCB7CiAgICAgICAgICBsYXRpbl9zcXVhcmU6IHRoaXMubGF0aW5TcXVhcmUsCiAgICAgICAgICBvZmZzZXRfdXNlZDogb2Zmc2V0LAogICAgICAgIH0pOwoKICAgICAgICB0aGlzLmxvYWRDdXJyZW50U3RlcCgpOwogICAgICB9KQogICAgICAuY2F0Y2goKGVycm9yKSA9PiB7CiAgICAgICAgY29uc29sZS5lcnJvcigiRXJyb3I6IiwgZXJyb3IpOwogICAgICB9KTsKICAgIHRoaXMucGxheWVyID0gdmlkZW9qcyh0aGlzLiRyZWZzLnZpZGVvUGxheWVyLCB0aGlzLm9wdGlvbnMsICgpID0+IHsKICAgICAgdGhpcy4kcmVmcy52aWRlb1BsYXllci5hZGRFdmVudExpc3RlbmVyKCJwbGF5IiwgKCkgPT4gewogICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7CiAgICAgICAgdGhpcy5pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICAgIGlmICgKICAgICAgICAgICAgdGhpcy5zdG9wQXRTZWxlY3Rpb24gJiYKICAgICAgICAgICAgdGhpcy5jdXJyZW50VGltZSA+IHRoaXMuc2VsZWN0aW9uRW5kICYmCiAgICAgICAgICAgIHRoaXMucGxheWVyCiAgICAgICAgICApIHsKICAgICAgICAgICAgdGhpcy5wbGF5ZXIucGF1c2UoKTsKICAgICAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5wbGF5ZXIucGF1c2VkKCkgJiYgdGhpcy5pbnRlcnZhbCkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpOwogICAgICAgICAgfQogICAgICAgICAgdGhpcy52aWRlb1Bvc2l0aW9uID0gdGhpcy5jdXJyZW50VGltZSAvIHRoaXMuZHVyYXRpb247CiAgICAgICAgfSwgNjApOwogICAgICB9KTsKICAgICAgdGhpcy4kcmVmcy52aWRlb1BsYXllci5hZGRFdmVudExpc3RlbmVyKCJwYXVzZSIsICgpID0+IHsKICAgICAgICBpZiAodGhpcy5pbnRlcnZhbCkgewogICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigiZW5kX29mX3ZpZGVvIiwgewogICAgICAgICAgICBjdXJyZW50X3N0ZXA6IHRoaXMuY3VycmVudFN0ZXAsCiAgICAgICAgICAgIHBvc2l0aW9uOiB0aGlzLnZpZGVvUG9zaXRpb24sCiAgICAgICAgICB9KTsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7CiAgICAgICAgICB0aGlzLnBsYXlpbmcgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgIHRoaXMucGxheWVyLmRpc3Bvc2UoKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["SpanSelection.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpanSelection.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div id=\"span-selection\">\n    <header>\n      <h1>Video {{ currentStep }}</h1>\n      <div id=\"next-video\">\n        <custom-button size=\"small\" :has-border=\"true\" @clicked=\"advanceStep()\"\n          >{{ nextStepText }}\n        </custom-button>\n      </div>\n    </header>\n    <div id=\"video-container\">\n      <video ref=\"videoPlayer\" class=\"video-js\"></video>\n    </div>\n    <div id=\"scratchpad\">\n      <textarea\n        v-model=\"scratchpad\"\n        placeholder=\"Write the video's translation here...\"\n      ></textarea>\n    </div>\n    <div id=\"timeline-container\">\n      <timeline\n        :position=\"videoPosition\"\n        :playing=\"playing\"\n        :duration=\"duration\"\n        :frame-base-name=\"frameBaseName\"\n        :frame-number=\"frameNumber\"\n        ref=\"timeline\"\n        @change=\"updateSelection($event)\"\n        @change-position=\"changeTick\"\n      />\n    </div>\n    <div id=\"video-controls-container\">\n      <video-controls\n        :playing=\"playing\"\n        :playingSelection=\"playingSelection\"\n        :currentTime=\"currentTime\"\n        :duration=\"duration\"\n        @general-play=\"generalPlay()\"\n        @selection-play=\"selectionPlay()\"\n        @upload-video=\"handleUploadClick\"\n      />\n      <input type=\"file\" ref=\"fileInput\" @change=\"handleFileUpload\" hidden />\n    </div>\n    <div id=\"search-panel\">\n      <search\n        ref=\"search\"\n        :selection=\"timelineSelection\"\n        :duration=\"duration\"\n        :currentStep=\"currentStep\"\n        :signs=\"signs\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport videojs from \"video.js\";\nimport Timeline from \"../components/Timeline.vue\";\nimport VideoControls from \"../components/VideoControls.vue\";\nimport Search from \"../components/Search.vue\";\nimport CustomButton from \"../components/CustomButton.vue\";\n\nexport default {\n  name: \"SpanSelection\",\n  components: { Timeline, VideoControls, Search, CustomButton },\n  props: {\n    options: {\n      type: Object,\n      default() {\n        return {\n          autoplay: false,\n          controls: false,\n          fill: true,\n          sources: [],\n        };\n      },\n    },\n  },\n  data() {\n    return {\n      playing: false,\n      showResults: false,\n      interval: null,\n      timelineSelection: { start: 0, end: 1 },\n      player: null,\n      stopAtSelection: false,\n      videoPosition: 0,\n      experimentalSetup: null,\n      currentStep: 0,\n      scratchpad: \"\",\n      signs: [],\n      latinSquare: [],\n    };\n  },\n  methods: {\n    updateSelection: function (newBoundaries) {\n      if (\n        this.timelineSelection.start != newBoundaries.start ||\n        this.timelineSelection.end != newBoundaries.end\n      ) {\n        this.timelineSelection = newBoundaries;\n        this.$saveAction(\"update_selection\", {\n          current_step: this.currentStep,\n          start: this.timelineSelection.start * this.duration,\n          end: this.timelineSelection.end * this.duration,\n        });\n      }\n    },\n    changeTick: function (newPosition) {\n      this.player.currentTime(newPosition * this.duration);\n      this.videoPosition = newPosition;\n      this.$saveAction(\"new_position\", {\n        current_step: this.currentStep,\n        position: this.videoPosition * this.duration,\n      });\n    },\n    generalPlay: function () {\n      if (this.player) {\n        if (this.playing) {\n          this.player.pause();\n          this.$saveAction(\"pause_click\", {\n            current_step: this.currentStep,\n            position: this.videoPosition,\n          });\n        } else {\n          this.player.play();\n          this.stopAtSelection = false;\n          this.$saveAction(\"play_click\", {\n            current_step: this.currentStep,\n            position: this.videoPosition,\n          });\n        }\n      }\n    },\n    selectionPlay: function () {\n      if (this.player) {\n        this.$saveAction(\"play_selection_click\", {\n          current_step: this.currentStep,\n          position: this.videoPosition,\n        });\n        this.player.currentTime(this.selectionStart);\n        this.stopAtSelection = true;\n        if (!this.playing) {\n          this.player.play();\n        }\n      }\n    },\n    loadCurrentStep: function () {\n      if (this.currentStep == this.experimentalSetup.length) {\n        console.log(\"Finished the sequence\");\n        this.$saveAction(\"finished_experiment\");\n        this.$router.push(\"/thank-you\");\n      } else {\n        this.scratchpad = \"\";\n        this.$saveAction(\"started_video\", {\n          current_step: this.currentStep,\n          video:\n            this.experimentalSetup[this.latinSquare[this.currentStep]].title,\n        });\n        // loads current video...\n        this.player.src({\n          src: this.experimentalSetup[this.latinSquare[this.currentStep]]\n            .video_url,\n          type: \"video/mp4\",\n        });\n        let searchPanel = this.$refs.search,\n          timeline = this.$refs.timeline;\n        searchPanel.resetResults();\n        timeline.resetSelection();\n        // ...and current pre-computed search results\n        fetch(\n          this.experimentalSetup[this.latinSquare[this.currentStep]].signs_data,\n          {\n            method: \"GET\",\n            headers: {\n              \"Content-Type\": \"application/text\",\n            },\n          }\n        )\n          .then((response) => response.text())\n          .then((data) => {\n            this.signs = JSON.parse(data).signs;\n          })\n          .catch((error) => {\n            console.error(\"Error:\", error);\n          });\n      }\n    },\n    advanceStep: function () {\n      this.currentStep += 1;\n      document.querySelectorAll(\"video\").forEach((vid) => vid.pause());\n      this.$saveAction(\"next_video\", { scratchpad: this.scratchpad });\n      this.loadCurrentStep();\n    },\n    handleUploadClick() {\n      this.$refs.fileInput.click(); // Trigger the file input\n    },\n    handleFileUpload(event) {\n      const file = event.target.files[0];\n      console.log(file);\n      // Process the file upload here\n      // Pass it to a video player or upload it to a server?\n    },\n  },\n  computed: {\n    frameBaseName: function () {\n      if (!this.experimentalSetup || !this.latinSquare) {\n        return \"frame\";\n      }\n      return this.experimentalSetup[this.latinSquare[this.currentStep]]\n        .frame_base_name;\n    },\n    frameNumber: function () {\n      if (!this.experimentalSetup || !this.latinSquare) {\n        return 1;\n      }\n      return parseInt(\n        this.experimentalSetup[this.latinSquare[this.currentStep]].frame_number\n      );\n    },\n    nextStepText: function () {\n      if (!this.experimentalSetup || !this.latinSquare) {\n        return \"\";\n      }\n      if (this.currentStep < this.experimentalSetup.length - 1) {\n        return \"Next video\";\n      }\n      return \"Finish experiment\";\n    },\n    playingSelection: function () {\n      if (!this.playing || this.currentPercentage == -1) {\n        return false;\n      }\n      return (\n        this.currentPercentage >= this.timelineSelection.start &&\n        this.currentPercentage <= this.timelineSelection.end\n      );\n    },\n    currentTime: function () {\n      if (this.player) {\n        return this.player.currentTime();\n      }\n      return 1;\n    },\n    currentPercentage: function () {\n      if (!this.player) {\n        return -1;\n      }\n      return this.player.currentTime() / this.player.duration();\n    },\n    duration: function () {\n      if (this.player) {\n        return this.player.duration();\n      }\n      return -1;\n    },\n    selectionStart: function () {\n      return this.timelineSelection.start * this.duration;\n    },\n    selectionEnd: function () {\n      return this.timelineSelection.end * this.duration;\n    },\n    tickInsideSelection: function () {\n      return (\n        this.currentTime >= this.selectionStart &&\n        this.currentTime <= this.selectionEnd\n      );\n    },\n  },\n  mounted() {\n    fetch(\"/data/experiment_setup.json\", {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/text\",\n      },\n    })\n      .then((response) => response.text())\n      .then((data) => {\n        this.experimentalSetup = JSON.parse(data).steps;\n        this.$saveAction(\"entered_experiment\");\n\n        // creates a latin square that is always the same for this user\n        // first, finds the first number in the uid.\n        let found = false,\n          offset,\n          i = 0;\n        console.log(this.$uid);\n        while (!found) {\n          if (isNaN(parseInt(this.$uid[i])) && i < this.$uid.length) {\n            i++;\n          } else {\n            found = true;\n          }\n        }\n        // there were no numbers inside the uid (very unlikely!), so\n        // will default to 0\n        if (i == this.$uid.length) {\n          offset = 0;\n        } else {\n          offset = parseInt(this.$uid[i]);\n        }\n\n        this.latinSquare.push(0);\n        let s = \"0 \";\n\n        // skips 0, which is the demo. This'll always be the first video.\n        for (let i = 1; i < this.experimentalSetup.length; i++) {\n          this.latinSquare.push(\n            ((i + offset) % (this.experimentalSetup.length - 1)) + 1\n          );\n          s += this.latinSquare[i] + \" \";\n        }\n\n        console.log(`indexes: ${s}`);\n        this.$saveAction(\"created_latin_square\", {\n          latin_square: this.latinSquare,\n          offset_used: offset,\n        });\n\n        this.loadCurrentStep();\n      })\n      .catch((error) => {\n        console.error(\"Error:\", error);\n      });\n    this.player = videojs(this.$refs.videoPlayer, this.options, () => {\n      this.$refs.videoPlayer.addEventListener(\"play\", () => {\n        this.playing = true;\n        this.interval = setInterval(() => {\n          if (\n            this.stopAtSelection &&\n            this.currentTime > this.selectionEnd &&\n            this.player\n          ) {\n            this.player.pause();\n            this.playing = false;\n          }\n          if (this.player.paused() && this.interval) {\n            clearInterval(this.interval);\n          }\n          this.videoPosition = this.currentTime / this.duration;\n        }, 60);\n      });\n      this.$refs.videoPlayer.addEventListener(\"pause\", () => {\n        if (this.interval) {\n          this.$saveAction(\"end_of_video\", {\n            current_step: this.currentStep,\n            position: this.videoPosition,\n          });\n          clearInterval(this.interval);\n          this.playing = false;\n        }\n      });\n    });\n  },\n  beforeDestroy() {\n    if (this.player) {\n      this.player.dispose();\n    }\n  },\n};\n</script>\n\n<style src=\"video.js/dist/video-js.css\"></style>\n<style lang=\"scss\">\n@import \"@/assets/styles/_mixins.scss\";\n@import \"@/assets/styles/_variables.scss\";\n\n$header_height: 48px;\n$timeline_height: 96px;\n$videocontrol_height: 60px;\n$scratchpad_height: 84px;\n$general_padding: 6px;\n\nheader {\n  grid-column: 1/ -1;\n  display: grid;\n  align-items: center;\n  grid-template-columns: max-content max-content auto max-content;\n  gap: 0.5rem;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-bottom: $general_padding;\n\n  h1,\n  h2 {\n    color: white;\n    @include fs(1);\n  }\n  h1 {\n    font-weight: 700;\n  }\n  h2 {\n    font-weight: 400;\n  }\n  #next-video {\n    grid-column: 4;\n  }\n}\n\n#span-selection {\n  display: grid;\n  grid-template-rows:\n    $header_height\n    calc(\n      100vh - #{$header_height + $timeline_height + $videocontrol_height +\n        $scratchpad_height + 2 * $general_padding}\n    )\n    $scratchpad_height\n    $timeline_height $videocontrol_height;\n  grid-template-columns: auto 576px;\n\n  background-color: black;\n  padding: $general_padding;\n}\n\n#video-container {\n  grid-column: 1;\n  border: 1px solid #333;\n  margin: 0 12px 12px 12px;\n}\n\n#video-controls-container {\n  grid-column: 1 / -1;\n  background-color: #333;\n  position: relative;\n}\n\n#timeline-container {\n  display: grid;\n  background-color: #000;\n  padding: 12px;\n\n  grid-column: 1 / -1;\n}\n\n#scratchpad {\n  margin: 0 12px 24px 12px;\n  display: grid;\n  textarea {\n    border-radius: 0.5rem;\n    padding: 12px;\n    @include fs(0);\n    resize: none;\n  }\n}\n\n#search-panel {\n  background-color: $very-light-accent;\n  border-radius: 4px;\n  grid-row: 2 / span 2;\n  grid-column: 2;\n\n  overflow-y: scroll;\n\n  margin-bottom: 24px;\n  margin-right: 12px;\n  padding: 12px;\n\n  display: grid;\n  grid-gap: 1rem;\n  grid-template-rows: min-content auto;\n}\n\n#results {\n  font-weight: 550;\n\n  .result {\n    background-color: rgba(255, 255, 255, 0.25);\n    padding: 0.5rem 1rem;\n    display: grid;\n    grid-template-columns: 70% 30%;\n    align-items: center;\n    font-size: 14px;\n    color: white;\n\n    &.header {\n      background-color: transparent;\n      font-size: 10px;\n      text-transform: uppercase;\n      letter-spacing: 0.1ch;\n      color: rgba(255, 255, 255, 0.8);\n    }\n    &:not(.header) {\n      margin-top: 2px;\n      border-radius: 0.125rem;\n    }\n    .signs {\n    }\n    .certainty {\n      span {\n        background-color: white;\n        height: 0.5rem;\n        display: block;\n      }\n    }\n  }\n}\n</style>\n"]}]}