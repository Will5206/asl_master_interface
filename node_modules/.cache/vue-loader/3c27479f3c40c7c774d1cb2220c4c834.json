{"remainingRequest":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will5206/Desktop/master_interface/src/components/Timeline.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/will5206/Desktop/master_interface/src/components/Timeline.vue","mtime":1704318960337},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/babel-loader/lib/index.js","mtime":1704319707261},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js","mtime":1704319707297}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgZXhwb3J0IGRlZmF1bHQgewogICAgbmFtZTogJ1RpbWVsaW5lJywKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgc3RhcnRYOiAtMSwKICAgICAgICBlbmRYOiAtMSwKICAgICAgICBvZmZzZXRYOiAwLAogICAgICAgIGJ1dHRvbldpZHRoOiAtMSwKICAgICAgICBpbml0aWFsTW91c2VYOiAtMSwKICAgICAgICBpbml0aWFsU3RhcnRYOiAtMSwKICAgICAgICBpbml0aWFsRW5kWDogLTEsCiAgICAgICAgaW5pdGlhbFBvc2l0aW9uOiAtMSwKICAgICAgICBkcmFnZ2luZ0Jsb2NrOiBmYWxzZSwKICAgICAgICBkcmFnZ2luZ1N0YXJ0OiBmYWxzZSwKICAgICAgICBkcmFnZ2luZ0VuZDogZmFsc2UsCiAgICAgICAgc2VsZWN0aW9uRWw6IG51bGwsCiAgICAgICAgcmVjdDogbnVsbCwKICAgICAgICBoZWlnaHQ6IG51bGwsCiAgICAgICAgd2lkdGg6IG51bGwsCiAgICAgICAgY2FudmFzOiBudWxsLAogICAgICAgIGN0eDogbnVsbCwKICAgICAgICBob3dNYW55RHJhd246IDAsCiAgICAgIH07CiAgICB9LAogICAgd2F0Y2g6IHsKICAgICAgZnJhbWVCYXNlTmFtZTogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc2V0dXBCYWNrZ3JvdW5kKCk7CiAgICAgIH0sCiAgICB9LAogICAgbW91bnRlZCgpIHsKICAgICAgdGhpcy5jYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYmctY2FudmFzJyk7CiAgICAgIHRoaXMuY3R4ID0gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTsKICAKICAgICAgdGhpcy5zZWxlY3Rpb25FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZWxlY3Rpb24nKTsKICAKICAgICAgdGhpcy51cGRhdGVXaWR0aERlZnMoKTsKICAgICAgdGhpcy5zZXR1cEJhY2tncm91bmQoKTsgLy8gZmlyc3QgdGltZQogICAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc3RhcnQnKTsKICAgICAgdGhpcy5idXR0b25XaWR0aCA9IGVsLm9mZnNldFdpZHRoICogMjsKICAgICAgbmV3IFJlc2l6ZU9ic2VydmVyKHRoaXMudXBkYXRlV2lkdGhEZWZzKS5vYnNlcnZlKHRoaXMuJGVsKTsKICAKICAgICAgbGV0IHdpbmRvd1Jlc2l6ZTsKICAgICAgd2luZG93Lm9ucmVzaXplID0gKCkgPT4gewogICAgICAgIGNsZWFyVGltZW91dCh3aW5kb3dSZXNpemUpOwogICAgICAgIC8vIHdpbGwgb25seSByZWRyYXcgYmcgaWYgdGhlcmUgd2FzIG5vIHJlc2l6ZSBpbiA1MG1zCiAgICAgICAgLy8gYXMgcGVyIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS81NDkwMDIxLzg4ODA5NAogICAgICAgIHdpbmRvd1Jlc2l6ZSA9IHNldFRpbWVvdXQodGhpcy5zZXR1cEJhY2tncm91bmQsIDUwKTsKICAgICAgfTsKICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICBjYW5TaG93UGhhbnRvbVRpY2s6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gIXRoaXMuZHJhZ2dpbmdCbG9jayAmJiAhdGhpcy5kcmFnZ2luZ1N0YXJ0ICYmICF0aGlzLmRyYWdnaW5nRW5kOwogICAgICB9LAogICAgICBzaG93bkR1cmF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy5kdXJhdGlvbiA9PSAtMSB8fAogICAgICAgICAgdGhpcy5zdGFydFggPT0gLTEgfHwKICAgICAgICAgIHRoaXMuZW5kWCA9PSAtMSB8fAogICAgICAgICAgIXRoaXMuZHVyYXRpb24KICAgICAgICApIHsKICAgICAgICAgIHJldHVybiBbJycsICcnLCAnJywgJyddOwogICAgICAgIH0KICAgICAgICByZXR1cm4gWwogICAgICAgICAgJzAnLAogICAgICAgICAgTWF0aC5yb3VuZCh0aGlzLmR1cmF0aW9uKSwKICAgICAgICAgICh0aGlzLnN0YXJ0WCAqIHRoaXMuZHVyYXRpb24pLnRvRml4ZWQoMSksCiAgICAgICAgICAodGhpcy5lbmRYICogdGhpcy5kdXJhdGlvbikudG9GaXhlZCgxKSwKICAgICAgICBdOwogICAgICB9LAogICAgICBsZWZ0Qm91bmRhcnlQb3NpdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsZWZ0LWJvdW5kYXJ5JyksCiAgICAgICAgICBsZWZ0ID0gdGhpcy5zdGFydFggKiB0aGlzLndpZHRoOwogICAgICAgIGlmICghZWwgfHwgbGVmdCA8PSBlbC5vZmZzZXRXaWR0aCkgewogICAgICAgICAgcmV0dXJuICdpbm5lcic7CiAgICAgICAgfQogICAgICAgIHJldHVybiAnb3V0ZXInOwogICAgICB9LAogICAgICByaWdodEJvdW5kYXJ5UG9zaXRpb246IGZ1bmN0aW9uICgpIHsKICAgICAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmlnaHQtYm91bmRhcnknKSwKICAgICAgICAgIHJpZ2h0ID0gKDEgLSB0aGlzLmVuZFgpICogdGhpcy53aWR0aDsKICAgICAgICBpZiAoIWVsIHx8IHJpZ2h0IDw9IGVsLm9mZnNldFdpZHRoKSB7CiAgICAgICAgICByZXR1cm4gJ2lubmVyJzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICdvdXRlcic7CiAgICAgIH0sCiAgICAgIHRpY2tQb3NpdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy53aWR0aCB8fCAhdGhpcy5yZWN0KSB7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmRyYWdnaW5nU3RhcnQgfHwgdGhpcy5kcmFnZ2luZ0VuZCkgewogICAgICAgICAgcmV0dXJuIGAke3RoaXMuaW5pdGlhbFBvc2l0aW9uICogMTAwfSVgOwogICAgICAgIH0KICAgICAgICByZXR1cm4gYCR7dGhpcy5wb3NpdGlvbiAqIDEwMH0lYDsKICAgICAgfSwKICAgICAgc3RhcnRQOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3RhcnRYIC8gdGhpcy53aWR0aDsKICAgICAgfSwKICAgICAgZW5kUDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLmVuZFggLyB0aGlzLndpZHRoOwogICAgICB9LAogICAgICBiYWNrZ3JvdW5kT2Zmc2V0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc3RhcnRYIDwgdGhpcy5lbmRYKSB7CiAgICAgICAgICByZXR1cm4gLSh0aGlzLnN0YXJ0WCAqIHRoaXMud2lkdGgpICsgJ3B4JzsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0odGhpcy5lbmRYICogdGhpcy53aWR0aCkgKyAncHgnOwogICAgICB9LAogICAgICBsZWZ0UG9zOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuc3RhcnRYIDwgdGhpcy5lbmRYKSB7CiAgICAgICAgICByZXR1cm4gYGNhbGMoJHt0aGlzLnN0YXJ0WCAqIDEwMH0lKWA7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmVuZFggKiAxMDAgKyAnJSc7CiAgICAgIH0sCiAgICAgIHJpZ2h0UG9zOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLnJlY3QpIHsKICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMuZW5kWCA+IHRoaXMuc3RhcnRYKSB7CiAgICAgICAgICByZXR1cm4gKDEgLSB0aGlzLmVuZFgpICogMTAwICsgJyUnOwogICAgICAgIH0KICAgICAgICByZXR1cm4gKDEgLSB0aGlzLnN0YXJ0WCkgKiAxMDAgKyAnJSc7CiAgICAgIH0sCiAgICB9LAogICAgbWV0aG9kczogewogICAgICByZXNldFNlbGVjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuc3RhcnRYID0gMDsKICAgICAgICB0aGlzLmVuZFggPSAxOwogICAgICAgIHRoaXMuZW5kQWxsRHJhZ2dpbmcoKTsKICAgICAgfSwKICAgICAgc2V0dXBCYWNrZ3JvdW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgbGV0IGRlc2lyZWRXaWR0aCA9IE1hdGgubWF4KDk2LCBNYXRoLmZsb29yKHRoaXMud2lkdGggLyB0aGlzLmR1cmF0aW9uKSksIC8vIG9uZSBmcmFtZSBwZXIgc2Vjb25kLCB3aXRoIG1pbiB3aWR0aCBvZiA0OC4KICAgICAgICAgIGhlaWdodCA9IChkZXNpcmVkV2lkdGggKiA5KSAvIDE2LAogICAgICAgICAgb2Zmc2V0WSA9IE1hdGgubWF4KDAsICh0aGlzLiRlbC5vZmZzZXRIZWlnaHQgLSBoZWlnaHQpIC8gMiAtIDQpLAogICAgICAgICAgbWF4SW5kZXggPSB0aGlzLmZyYW1lTnVtYmVyLAogICAgICAgICAgbWluSW5kZXggPSAxLAogICAgICAgICAgY291bnQgPSBNYXRoLmZsb29yKHRoaXMud2lkdGggLyBkZXNpcmVkV2lkdGgpLAogICAgICAgICAgZGlmZiA9ICh0aGlzLndpZHRoIC0gY291bnQgKiBkZXNpcmVkV2lkdGgpIC8gKGNvdW50IC0gMSk7CiAgCiAgICAgICAgdGhpcy5jdHguY2xlYXJSZWN0KDAsIDAsIHRoaXMuY2FudmFzLndpZHRoLCB0aGlzLmNhbnZhcy5oZWlnaHQpOwogICAgICAgIHRoaXMuaG93TWFueURyYXduID0gMDsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKICAgICAgICAgIGxldCBpbmRleCA9CiAgICAgICAgICAgIE1hdGguZmxvb3IoKGkgLyBjb3VudCkgKiAobWF4SW5kZXggLSBtaW5JbmRleCkgKyBtaW5JbmRleCkgKyAnJzsKICAgICAgICAgIGxldCBpbWcgPSBuZXcgSW1hZ2UoKTsKICAgICAgICAgIGxldCBwYXRoID0gYC9mcmFtZXMvJHt0aGlzLmZyYW1lQmFzZU5hbWV9JHtpbmRleC5wYWRTdGFydCgzLCAnMCcpfS5qcGdgOwogICAgICAgICAgaW1nLnNyYyA9IHBhdGg7CiAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4gewogICAgICAgICAgICB0aGlzLmN0eC5kcmF3SW1hZ2UoCiAgICAgICAgICAgICAgaW1nLAogICAgICAgICAgICAgIGkgKiAoZGVzaXJlZFdpZHRoICsgZGlmZiksCiAgICAgICAgICAgICAgb2Zmc2V0WSwKICAgICAgICAgICAgICBkZXNpcmVkV2lkdGgsCiAgICAgICAgICAgICAgaGVpZ2h0CiAgICAgICAgICAgICk7CiAgICAgICAgICAgIHRoaXMuaG93TWFueURyYXduKys7CiAgCiAgICAgICAgICAgIC8vIGlzIHRoaXMgdGhlIGxhc3QgY2FsbCBiYWNrPwogICAgICAgICAgICBpZiAodGhpcy5ob3dNYW55RHJhd24gPT0gY291bnQpIHsKICAgICAgICAgICAgICB0aGlzLnNlbGVjdGlvbkVsLnN0eWxlLmJhY2tncm91bmQgPSBgdXJsKCR7dGhpcy5jYW52YXMudG9EYXRhVVJMKCl9KWA7CiAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gJ3JnYmEoMCwwLDAsMC42NiknOwogICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsIDAsIHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0KTsKICAgICAgICAgICAgICB0aGlzLiRlbC5zdHlsZS5iYWNrZ3JvdW5kID0gYHVybCgke3RoaXMuY2FudmFzLnRvRGF0YVVSTCgpfSlgOwogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSwKICAgICAgdXBkYXRlV2lkdGhEZWZzOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhpcy5yZWN0ID0gdGhpcy4kZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgaWYgKHRoaXMuc3RhcnRYID09IC0xKSB7CiAgICAgICAgICB0aGlzLnN0YXJ0WCA9IDA7CiAgICAgICAgICB0aGlzLmVuZFggPSAxOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy53aWR0aCA9PSBudWxsKSB7CiAgICAgICAgICB0aGlzLndpZHRoID0gdGhpcy4kZWwub2Zmc2V0V2lkdGg7CiAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuJGVsLm9mZnNldEhlaWdodDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgbGV0IG5ld1dpZHRoID0gdGhpcy4kZWwub2Zmc2V0V2lkdGg7CiAgCiAgICAgICAgICB0aGlzLndpZHRoID0gbmV3V2lkdGg7CiAgICAgICAgICB0aGlzLmhlaWdodCA9IHRoaXMuJGVsLm9mZnNldEhlaWdodDsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1vdXNlVXA6IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgIXRoaXMuZHJhZ2dpbmdTdGFydCAmJgogICAgICAgICAgIXRoaXMuZHJhZ2dpbmdFbmQgJiYKICAgICAgICAgICghdGhpcy5kcmFnZ2luZ0Jsb2NrIHx8IHRoaXMuaW5pdGlhbE1vdXNlWCA9PSBlLmNsaWVudFgpCiAgICAgICAgKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KAogICAgICAgICAgICAnY2hhbmdlLXBvc2l0aW9uJywKICAgICAgICAgICAgKGUuY2xpZW50WCAtIHRoaXMucmVjdC5sZWZ0KSAvIHRoaXMud2lkdGgKICAgICAgICAgICk7CiAgICAgICAgfQogICAgICAgIHRoaXMuZW5kQWxsRHJhZ2dpbmcoKTsKICAgICAgfSwKICAgICAgZW5kQWxsRHJhZ2dpbmc6IGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAodGhpcy5kcmFnZ2luZ1N0YXJ0IHx8IHRoaXMuZHJhZ2dpbmdFbmQpIHsKICAgICAgICAgIC8vIG1vdmVzIHRoZSB0aWNrZXIgYmFjayB0byB3aGVyZXZlciBpdCB3YXMKICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZS1wb3NpdGlvbicsIHRoaXMuaW5pdGlhbFBvc2l0aW9uKTsKICAgICAgICB9CiAgICAgICAgdGhpcy5kcmFnZ2luZ1N0YXJ0ID0gZmFsc2U7CiAgICAgICAgdGhpcy5kcmFnZ2luZ0VuZCA9IGZhbHNlOwogICAgICAgIHRoaXMuZHJhZ2dpbmdCbG9jayA9IGZhbHNlOwogIAogICAgICAgIGxldCBib3VuZGFyaWVzID0geyBzdGFydDogdGhpcy5zdGFydFgsIGVuZDogdGhpcy5lbmRYIH07CiAgICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJywgYm91bmRhcmllcyk7CiAgICAgIH0sCiAgICAgIHN0YXJ0RHJhZ2dpbmdCbG9jazogZnVuY3Rpb24gKGUpIHsKICAgICAgICB0aGlzLmluaXRpYWxNb3VzZVggPSBlLmNsaWVudFg7CiAgICAgICAgdGhpcy5pbml0aWFsU3RhcnRYID0gdGhpcy5zdGFydFg7CiAgICAgICAgdGhpcy5pbml0aWFsRW5kWCA9IHRoaXMuZW5kWDsKICAgICAgICB0aGlzLmluaXRpYWxQb3NpdGlvbiA9IHRoaXMucG9zaXRpb247CiAgICAgICAgdGhpcy5kcmFnZ2luZ0Jsb2NrID0gdHJ1ZTsKICAgICAgfSwKICAgICAgc3RhcnREcmFnZ2luZ1N0YXJ0OiBmdW5jdGlvbiAoZSkgewogICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdGFydCcpOwogICAgICAgIGxldCBib3VuZCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpOwogICAgICAgIHRoaXMub2Zmc2V0WCA9IGUuY2xpZW50WCAtIGJvdW5kLmxlZnQ7CiAgICAgICAgdGhpcy5kcmFnZ2luZ1N0YXJ0ID0gdHJ1ZTsKICAgICAgfSwKICAgICAgc3RhcnREcmFnZ2luZ0VuZDogZnVuY3Rpb24gKGUpIHsKICAgICAgICBsZXQgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZW5kJyk7CiAgICAgICAgbGV0IGJvdW5kID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgdGhpcy5vZmZzZXRYID0gZS5jbGllbnRYIC0gYm91bmQucmlnaHQ7CiAgICAgICAgdGhpcy5kcmFnZ2luZ0VuZCA9IHRydWU7CiAgICAgIH0sCiAgICAgIG1vdXNlTW92ZTogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgbGV0IHggPSBldmVudC5jbGllbnRYIC0gdGhpcy5yZWN0LmxlZnQgLSB0aGlzLm9mZnNldFg7CiAgICAgICAgaWYgKHRoaXMuZHJhZ2dpbmdTdGFydCkgewogICAgICAgICAgaWYgKCh4ICsgdGhpcy5idXR0b25XaWR0aCkgLyB0aGlzLndpZHRoIDwgdGhpcy5lbmRYKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnRYID0gTWF0aC5tYXgoeCAvIHRoaXMud2lkdGgsIDApOwogICAgICAgICAgICB0aGlzLiRlbWl0KCdjaGFuZ2UtcG9zaXRpb24nLCB0aGlzLnN0YXJ0WCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRyYWdnaW5nRW5kKSB7CiAgICAgICAgICBpZiAoKHggLSB0aGlzLmJ1dHRvbldpZHRoKSAvIHRoaXMud2lkdGggPiB0aGlzLnN0YXJ0WCkgewogICAgICAgICAgICB0aGlzLmVuZFggPSBNYXRoLm1pbih4IC8gdGhpcy53aWR0aCwgMSk7CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZS1wb3NpdGlvbicsIHRoaXMuZW5kWCk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmRyYWdnaW5nQmxvY2spIHsKICAgICAgICAgIGxldCBvZmZzZXQgPSB0aGlzLmluaXRpYWxNb3VzZVggLSBldmVudC5jbGllbnRYOwogICAgICAgICAgbGV0IGNoYW5nZSA9IG9mZnNldCAvIHRoaXMud2lkdGg7CiAgICAgICAgICBpZiAoCiAgICAgICAgICAgIHRoaXMuaW5pdGlhbFN0YXJ0WCAtIGNoYW5nZSA+PSAwICYmCiAgICAgICAgICAgIHRoaXMuaW5pdGlhbEVuZFggLSBjaGFuZ2UgPD0gMQogICAgICAgICAgKSB7CiAgICAgICAgICAgIHRoaXMuc3RhcnRYID0gdGhpcy5pbml0aWFsU3RhcnRYIC0gY2hhbmdlOwogICAgICAgICAgICB0aGlzLmVuZFggPSB0aGlzLmluaXRpYWxFbmRYIC0gY2hhbmdlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgLy8gdGhpcyBpcyBqdXN0IHNvIHdlIGRvbid0IGhhdmUgYSB2ZXJ5IHNtYWxsIGxlZnQgb3ZlciB2YWx1ZSBlaXRoZXIgYXQgdGhlIHN0YXJ0IG9yIGVuZAogICAgICAgICAgICBpZiAodGhpcy5pbml0aWFsU3RhcnRYIC0gY2hhbmdlIDw9IDApIHsKICAgICAgICAgICAgICB0aGlzLmVuZFggLT0gdGhpcy5zdGFydFg7CiAgICAgICAgICAgICAgdGhpcy5zdGFydFggPSAwOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMuc3RhcnRYIC09IDEgLSB0aGlzLmVuZFg7CiAgICAgICAgICAgICAgdGhpcy5lbmRYID0gMTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAvLyBwaGFudG9tIHRpY2sKICAgICAgICAgIGxldCBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwaGFudG9tLXRpY2snKTsKICAgICAgICAgIGVsLnN0eWxlLmxlZnQgPQogICAgICAgICAgICAoKGV2ZW50LmNsaWVudFggLSB0aGlzLnJlY3QubGVmdCkgLyB0aGlzLndpZHRoKSAqIDEwMCArICclJzsKICAgICAgICB9CiAgICAgIH0sCiAgICB9LAogICAgcHJvcHM6IHsKICAgICAgZnJhbWVCYXNlTmFtZTogewogICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICBkZWZhdWx0OiAnZnJhbWUnLAogICAgICB9LAogICAgICBmcmFtZU51bWJlcjogewogICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICBkZWZhdWx0OiAxMDAsCiAgICAgIH0sCiAgICAgIGR1cmF0aW9uOiB7CiAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgIGRlZmF1bHQ6IC0xLAogICAgICB9LAogICAgICBwbGF5aW5nOiB7CiAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgfSwKICAgICAgcG9zaXRpb246IHsKICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgZGVmYXVsdDogMCwKICAgICAgfSwKICAgIH0sCiAgfTsKICA="},{"version":3,"sources":["Timeline.vue"],"names":[],"mappings":";AAkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Timeline.vue","sourceRoot":"src/components","sourcesContent":["<template>\n    <div\n      id=\"timeline\"\n      @mousemove=\"mouseMove\"\n      @mouseup=\"mouseUp\"\n      @mouseleave=\"endAllDragging\"\n    >\n      <canvas id=\"bg-canvas\" :width=\"width\" :height=\"height\" />\n      <div\n        id=\"selection\"\n        :class=\"{ dragging: draggingBlock }\"\n        :style=\"{\n          left: leftPos,\n          right: rightPos,\n          backgroundPositionX: backgroundOffset,\n          backgroundPositionY: `-2px`,\n        }\"\n        @mousedown=\"startDraggingBlock\"\n      >\n        <button\n          id=\"start\"\n          class=\"selection-boundary\"\n          @mousedown=\"startDraggingStart\"\n        />\n        <button\n          id=\"end\"\n          class=\"selection-boundary\"\n          @mousedown=\"startDraggingEnd\"\n        />\n      </div>\n      <div\n        id=\"main-tick\"\n        class=\"tick\"\n        :class=\"{\n          playing: playing,\n          'ticker-elsewhere': draggingStart || draggingEnd,\n        }\"\n        :style=\"{ left: tickPosition }\"\n      />\n      <div\n        id=\"phantom-tick\"\n        class=\"tick\"\n        :class=\"{ 'can-show': canShowPhantomTick }\"\n      />\n      <p class=\"duration start\">{{ shownDuration[0] }}</p>\n      <p class=\"duration end\">{{ shownDuration[1] }}</p>\n      <p\n        id=\"left-boundary\"\n        class=\"duration boundary left\"\n        :class=\"leftBoundaryPosition\"\n        :style=\"{ left: leftPos }\"\n      >\n        {{ shownDuration[2] }}\n      </p>\n      <p\n        id=\"right-boundary\"\n        class=\"duration boundary right\"\n        :class=\"rightBoundaryPosition\"\n        :style=\"{ right: rightPos }\"\n      >\n        {{ shownDuration[3] }}\n      </p>\n    </div>\n  </template>\n  \n  <script>\n  export default {\n    name: 'Timeline',\n    data() {\n      return {\n        startX: -1,\n        endX: -1,\n        offsetX: 0,\n        buttonWidth: -1,\n        initialMouseX: -1,\n        initialStartX: -1,\n        initialEndX: -1,\n        initialPosition: -1,\n        draggingBlock: false,\n        draggingStart: false,\n        draggingEnd: false,\n        selectionEl: null,\n        rect: null,\n        height: null,\n        width: null,\n        canvas: null,\n        ctx: null,\n        howManyDrawn: 0,\n      };\n    },\n    watch: {\n      frameBaseName: function () {\n        this.setupBackground();\n      },\n    },\n    mounted() {\n      this.canvas = document.getElementById('bg-canvas');\n      this.ctx = this.canvas.getContext('2d');\n  \n      this.selectionEl = document.getElementById('selection');\n  \n      this.updateWidthDefs();\n      this.setupBackground(); // first time\n      let el = document.getElementById('start');\n      this.buttonWidth = el.offsetWidth * 2;\n      new ResizeObserver(this.updateWidthDefs).observe(this.$el);\n  \n      let windowResize;\n      window.onresize = () => {\n        clearTimeout(windowResize);\n        // will only redraw bg if there was no resize in 50ms\n        // as per https://stackoverflow.com/a/5490021/888094\n        windowResize = setTimeout(this.setupBackground, 50);\n      };\n    },\n    computed: {\n      canShowPhantomTick: function () {\n        return !this.draggingBlock && !this.draggingStart && !this.draggingEnd;\n      },\n      shownDuration: function () {\n        if (\n          this.duration == -1 ||\n          this.startX == -1 ||\n          this.endX == -1 ||\n          !this.duration\n        ) {\n          return ['', '', '', ''];\n        }\n        return [\n          '0',\n          Math.round(this.duration),\n          (this.startX * this.duration).toFixed(1),\n          (this.endX * this.duration).toFixed(1),\n        ];\n      },\n      leftBoundaryPosition: function () {\n        let el = document.getElementById('left-boundary'),\n          left = this.startX * this.width;\n        if (!el || left <= el.offsetWidth) {\n          return 'inner';\n        }\n        return 'outer';\n      },\n      rightBoundaryPosition: function () {\n        let el = document.getElementById('right-boundary'),\n          right = (1 - this.endX) * this.width;\n        if (!el || right <= el.offsetWidth) {\n          return 'inner';\n        }\n        return 'outer';\n      },\n      tickPosition: function () {\n        if (!this.width || !this.rect) {\n          return '';\n        }\n        if (this.draggingStart || this.draggingEnd) {\n          return `${this.initialPosition * 100}%`;\n        }\n        return `${this.position * 100}%`;\n      },\n      startP: function () {\n        return this.startX / this.width;\n      },\n      endP: function () {\n        return this.endX / this.width;\n      },\n      backgroundOffset: function () {\n        if (!this.rect) {\n          return '';\n        }\n        if (this.startX < this.endX) {\n          return -(this.startX * this.width) + 'px';\n        }\n        return -(this.endX * this.width) + 'px';\n      },\n      leftPos: function () {\n        if (!this.rect) {\n          return '';\n        }\n        if (this.startX < this.endX) {\n          return `calc(${this.startX * 100}%)`;\n        }\n        return this.endX * 100 + '%';\n      },\n      rightPos: function () {\n        if (!this.rect) {\n          return '';\n        }\n        if (this.endX > this.startX) {\n          return (1 - this.endX) * 100 + '%';\n        }\n        return (1 - this.startX) * 100 + '%';\n      },\n    },\n    methods: {\n      resetSelection: function () {\n        this.startX = 0;\n        this.endX = 1;\n        this.endAllDragging();\n      },\n      setupBackground: function () {\n        let desiredWidth = Math.max(96, Math.floor(this.width / this.duration)), // one frame per second, with min width of 48.\n          height = (desiredWidth * 9) / 16,\n          offsetY = Math.max(0, (this.$el.offsetHeight - height) / 2 - 4),\n          maxIndex = this.frameNumber,\n          minIndex = 1,\n          count = Math.floor(this.width / desiredWidth),\n          diff = (this.width - count * desiredWidth) / (count - 1);\n  \n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        this.howManyDrawn = 0;\n        for (let i = 0; i < count; i++) {\n          let index =\n            Math.floor((i / count) * (maxIndex - minIndex) + minIndex) + '';\n          let img = new Image();\n          let path = `/frames/${this.frameBaseName}${index.padStart(3, '0')}.jpg`;\n          img.src = path;\n          img.onload = () => {\n            this.ctx.drawImage(\n              img,\n              i * (desiredWidth + diff),\n              offsetY,\n              desiredWidth,\n              height\n            );\n            this.howManyDrawn++;\n  \n            // is this the last call back?\n            if (this.howManyDrawn == count) {\n              this.selectionEl.style.background = `url(${this.canvas.toDataURL()})`;\n              this.ctx.fillStyle = 'rgba(0,0,0,0.66)';\n              this.ctx.fillRect(0, 0, this.width, this.height);\n              this.$el.style.background = `url(${this.canvas.toDataURL()})`;\n            }\n          };\n        }\n      },\n      updateWidthDefs: function () {\n        this.rect = this.$el.getBoundingClientRect();\n        if (this.startX == -1) {\n          this.startX = 0;\n          this.endX = 1;\n        }\n        if (this.width == null) {\n          this.width = this.$el.offsetWidth;\n          this.height = this.$el.offsetHeight;\n        } else {\n          let newWidth = this.$el.offsetWidth;\n  \n          this.width = newWidth;\n          this.height = this.$el.offsetHeight;\n        }\n      },\n      mouseUp: function (e) {\n        if (\n          !this.draggingStart &&\n          !this.draggingEnd &&\n          (!this.draggingBlock || this.initialMouseX == e.clientX)\n        ) {\n          this.$emit(\n            'change-position',\n            (e.clientX - this.rect.left) / this.width\n          );\n        }\n        this.endAllDragging();\n      },\n      endAllDragging: function () {\n        if (this.draggingStart || this.draggingEnd) {\n          // moves the ticker back to wherever it was\n          this.$emit('change-position', this.initialPosition);\n        }\n        this.draggingStart = false;\n        this.draggingEnd = false;\n        this.draggingBlock = false;\n  \n        let boundaries = { start: this.startX, end: this.endX };\n        this.$emit('change', boundaries);\n      },\n      startDraggingBlock: function (e) {\n        this.initialMouseX = e.clientX;\n        this.initialStartX = this.startX;\n        this.initialEndX = this.endX;\n        this.initialPosition = this.position;\n        this.draggingBlock = true;\n      },\n      startDraggingStart: function (e) {\n        let el = document.getElementById('start');\n        let bound = el.getBoundingClientRect();\n        this.offsetX = e.clientX - bound.left;\n        this.draggingStart = true;\n      },\n      startDraggingEnd: function (e) {\n        let el = document.getElementById('end');\n        let bound = el.getBoundingClientRect();\n        this.offsetX = e.clientX - bound.right;\n        this.draggingEnd = true;\n      },\n      mouseMove: function (event) {\n        let x = event.clientX - this.rect.left - this.offsetX;\n        if (this.draggingStart) {\n          if ((x + this.buttonWidth) / this.width < this.endX) {\n            this.startX = Math.max(x / this.width, 0);\n            this.$emit('change-position', this.startX);\n          }\n        } else if (this.draggingEnd) {\n          if ((x - this.buttonWidth) / this.width > this.startX) {\n            this.endX = Math.min(x / this.width, 1);\n            this.$emit('change-position', this.endX);\n          }\n        } else if (this.draggingBlock) {\n          let offset = this.initialMouseX - event.clientX;\n          let change = offset / this.width;\n          if (\n            this.initialStartX - change >= 0 &&\n            this.initialEndX - change <= 1\n          ) {\n            this.startX = this.initialStartX - change;\n            this.endX = this.initialEndX - change;\n          } else {\n            // this is just so we don't have a very small left over value either at the start or end\n            if (this.initialStartX - change <= 0) {\n              this.endX -= this.startX;\n              this.startX = 0;\n            } else {\n              this.startX -= 1 - this.endX;\n              this.endX = 1;\n            }\n          }\n        } else {\n          // phantom tick\n          let el = document.getElementById('phantom-tick');\n          el.style.left =\n            ((event.clientX - this.rect.left) / this.width) * 100 + '%';\n        }\n      },\n    },\n    props: {\n      frameBaseName: {\n        type: String,\n        default: 'frame',\n      },\n      frameNumber: {\n        type: Number,\n        default: 100,\n      },\n      duration: {\n        type: Number,\n        default: -1,\n      },\n      playing: {\n        type: Boolean,\n        default: false,\n      },\n      position: {\n        type: Number,\n        default: 0,\n      },\n    },\n  };\n  </script>\n  \n  <style lang=\"scss\" scoped>\n  @import '@/assets/styles/_variables.scss';\n  @import '@/assets/styles/_mixins.scss';\n  \n  #timeline {\n    position: relative;\n    background-position-y: center;\n    background-repeat: no-repeat;\n    border: 2px solid #333;\n  \n    &:hover {\n      // cursor: text;\n      #phantom-tick.can-show {\n        display: block;\n      }\n    }\n  }\n  \n  $b: 2px;\n  $p: 0px;\n  $w: 4px;\n  $m_w: 3;\n  $br: 0.33rem;\n  \n  #selection {\n    position: absolute;\n    top: $p;\n    bottom: $p;\n    background-color: rgba(255, 255, 255, 0.33);\n    border-top: $b solid $accent;\n    border-bottom: $b solid $accent;\n    border-radius: $br;\n    z-index: 1;\n  \n    cursor: grab;\n    &.dragging {\n      cursor: grabbing;\n    }\n  }\n  \n  .selection-boundary {\n    position: absolute;\n    top: -$b;\n    bottom: -$b;\n  \n    cursor: ew-resize;\n  \n    border-width: 0;\n    border-color: $accent;\n    border-style: solid;\n  \n    z-index: 3;\n    background-color: transparent;\n    padding: 0;\n    transition: border-width 0.33s ease;\n  \n    width: $w * $m_w;\n    &:hover {\n      width: $w * ($m_w + 1);\n    }\n  \n    &#start {\n      border-left-width: $w;\n      border-top-left-radius: $br;\n      border-bottom-left-radius: $br;\n      &:hover {\n        border-left-width: $w * $m_w;\n      }\n    }\n    &#end {\n      right: 0;\n      border-right-width: $w;\n      border-top-right-radius: $br;\n      border-bottom-right-radius: $br;\n      &:hover {\n        border-right-width: $w * $m_w;\n      }\n    }\n  }\n  \n  .tick {\n    position: absolute;\n    pointer-events: none;\n    opacity: 1;\n    z-index: 4;\n  }\n  \n  #phantom-tick {\n    top: 0;\n    bottom: 0;\n    z-index: 3;\n    width: 1px;\n    border-left: 1px dotted rgba(255, 255, 255, 0.5);\n  \n    display: none;\n  }\n  \n  #main-tick {\n    top: -3px;\n    bottom: -3px;\n    width: 3px;\n    border-radius: 4px;\n    transform: translateX(-1px);\n    background-color: white;\n    border-left: 1px solid white;\n    border-right: 1px solid white;\n  \n    transition: opacity 0.5s ease;\n  \n    &.ticker-elsewhere {\n      opacity: 0.2;\n    }\n  }\n  \n  .duration {\n    position: absolute;\n    user-select: none;\n    @include fs(-2);\n    font-weight: 450;\n    color: #ddd;\n    &.start,\n    &.end {\n      top: -24px;\n    }\n    &.boundary {\n      font-weight: 700;\n      top: 50%;\n      z-index: 4;\n      &.left {\n        transform: translateY(-50%) translateX(calc(-100% - 0.5ch));\n      }\n      &.left.inner {\n        transform: translateY(-50%) translateX(calc(0.5ch + 12px));\n      }\n      &.right {\n        transform: translateY(-50%) translateX(calc(100% + 0.5ch));\n      }\n      &.right.inner {\n        transform: translateY(-50%) translateX(calc(-0.5ch - 12px));\n      }\n      color: $accent;\n    }\n    &.start {\n      left: 0;\n    }\n    &.end {\n      right: 0;\n    }\n    &.boundary {\n    }\n  }\n  \n  canvas {\n    display: none;\n  }\n  </style>"]}]}