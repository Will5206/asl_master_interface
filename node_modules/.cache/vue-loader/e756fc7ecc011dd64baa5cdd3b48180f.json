{"remainingRequest":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/will5206/Desktop/master_interface/src/views/SpanSelection.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/will5206/Desktop/master_interface/src/views/SpanSelection.vue","mtime":1704321512251},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/babel-loader/lib/index.js","mtime":1704319707261},{"path":"/Users/will5206/Desktop/master_interface/node_modules/cache-loader/dist/cjs.js","mtime":1704319707089},{"path":"/Users/will5206/Desktop/master_interface/node_modules/vue-loader/lib/index.js","mtime":1704319707297}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IHZpZGVvanMgZnJvbSAndmlkZW8uanMnOwogIGltcG9ydCBUaW1lbGluZSBmcm9tICcuLi9jb21wb25lbnRzL1RpbWVsaW5lLnZ1ZSc7CiAgaW1wb3J0IFZpZGVvQ29udHJvbHMgZnJvbSAnLi4vY29tcG9uZW50cy9WaWRlb0NvbnRyb2xzLnZ1ZSc7CiAgaW1wb3J0IFNlYXJjaCBmcm9tICcuLi9jb21wb25lbnRzL1NlYXJjaC52dWUnOwogIGltcG9ydCBDdXN0b21CdXR0b24gZnJvbSAnLi4vY29tcG9uZW50cy9DdXN0b21CdXR0b24udnVlJzsKICAKICBleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnU3BhblNlbGVjdGlvbicsCiAgICBjb21wb25lbnRzOiB7IFRpbWVsaW5lLCBWaWRlb0NvbnRyb2xzLCBTZWFyY2gsIEN1c3RvbUJ1dHRvbiB9LAogICAgcHJvcHM6IHsKICAgICAgb3B0aW9uczogewogICAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgICBkZWZhdWx0KCkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYXV0b3BsYXk6IGZhbHNlLAogICAgICAgICAgICBjb250cm9sczogZmFsc2UsCiAgICAgICAgICAgIGZpbGw6IHRydWUsCiAgICAgICAgICAgIHNvdXJjZXM6IFtdLAogICAgICAgICAgfTsKICAgICAgICB9LAogICAgICB9LAogICAgfSwKICAgIGRhdGEoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgcGxheWluZzogZmFsc2UsCiAgICAgICAgc2hvd1Jlc3VsdHM6IGZhbHNlLAogICAgICAgIGludGVydmFsOiBudWxsLAogICAgICAgIHRpbWVsaW5lU2VsZWN0aW9uOiB7IHN0YXJ0OiAwLCBlbmQ6IDEgfSwKICAgICAgICBwbGF5ZXI6IG51bGwsCiAgICAgICAgc3RvcEF0U2VsZWN0aW9uOiBmYWxzZSwKICAgICAgICB2aWRlb1Bvc2l0aW9uOiAwLAogICAgICAgIGV4cGVyaW1lbnRhbFNldHVwOiBudWxsLAogICAgICAgIGN1cnJlbnRTdGVwOiAwLAogICAgICAgIHNjcmF0Y2hwYWQ6ICcnLAogICAgICAgIHNpZ25zOiBbXSwKICAgICAgICBsYXRpblNxdWFyZTogW10sCiAgICAgIH07CiAgICB9LAogICAgbWV0aG9kczogewogICAgICB1cGRhdGVTZWxlY3Rpb246IGZ1bmN0aW9uIChuZXdCb3VuZGFyaWVzKSB7CiAgICAgICAgaWYgKAogICAgICAgICAgdGhpcy50aW1lbGluZVNlbGVjdGlvbi5zdGFydCAhPSBuZXdCb3VuZGFyaWVzLnN0YXJ0IHx8CiAgICAgICAgICB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLmVuZCAhPSBuZXdCb3VuZGFyaWVzLmVuZAogICAgICAgICkgewogICAgICAgICAgdGhpcy50aW1lbGluZVNlbGVjdGlvbiA9IG5ld0JvdW5kYXJpZXM7CiAgICAgICAgICB0aGlzLiRzYXZlQWN0aW9uKCd1cGRhdGVfc2VsZWN0aW9uJywgewogICAgICAgICAgICBjdXJyZW50X3N0ZXA6IHRoaXMuY3VycmVudFN0ZXAsCiAgICAgICAgICAgIHN0YXJ0OiB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLnN0YXJ0ICogdGhpcy5kdXJhdGlvbiwKICAgICAgICAgICAgZW5kOiB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLmVuZCAqIHRoaXMuZHVyYXRpb24sCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGNoYW5nZVRpY2s6IGZ1bmN0aW9uIChuZXdQb3NpdGlvbikgewogICAgICAgIHRoaXMucGxheWVyLmN1cnJlbnRUaW1lKG5ld1Bvc2l0aW9uICogdGhpcy5kdXJhdGlvbik7CiAgICAgICAgdGhpcy52aWRlb1Bvc2l0aW9uID0gbmV3UG9zaXRpb247CiAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbignbmV3X3Bvc2l0aW9uJywgewogICAgICAgICAgY3VycmVudF9zdGVwOiB0aGlzLmN1cnJlbnRTdGVwLAogICAgICAgICAgcG9zaXRpb246IHRoaXMudmlkZW9Qb3NpdGlvbiAqIHRoaXMuZHVyYXRpb24sCiAgICAgICAgfSk7CiAgICAgIH0sCiAgICAgIGdlbmVyYWxQbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICBpZiAodGhpcy5wbGF5aW5nKSB7CiAgICAgICAgICAgIHRoaXMucGxheWVyLnBhdXNlKCk7CiAgICAgICAgICAgIHRoaXMuJHNhdmVBY3Rpb24oJ3BhdXNlX2NsaWNrJywgewogICAgICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy52aWRlb1Bvc2l0aW9uLAogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMucGxheWVyLnBsYXkoKTsKICAgICAgICAgICAgdGhpcy5zdG9wQXRTZWxlY3Rpb24gPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbigncGxheV9jbGljaycsIHsKICAgICAgICAgICAgICBjdXJyZW50X3N0ZXA6IHRoaXMuY3VycmVudFN0ZXAsCiAgICAgICAgICAgICAgcG9zaXRpb246IHRoaXMudmlkZW9Qb3NpdGlvbiwKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9LAogICAgICBzZWxlY3Rpb25QbGF5OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICB0aGlzLiRzYXZlQWN0aW9uKCdwbGF5X3NlbGVjdGlvbl9jbGljaycsIHsKICAgICAgICAgICAgY3VycmVudF9zdGVwOiB0aGlzLmN1cnJlbnRTdGVwLAogICAgICAgICAgICBwb3NpdGlvbjogdGhpcy52aWRlb1Bvc2l0aW9uLAogICAgICAgICAgfSk7CiAgICAgICAgICB0aGlzLnBsYXllci5jdXJyZW50VGltZSh0aGlzLnNlbGVjdGlvblN0YXJ0KTsKICAgICAgICAgIHRoaXMuc3RvcEF0U2VsZWN0aW9uID0gdHJ1ZTsKICAgICAgICAgIGlmICghdGhpcy5wbGF5aW5nKSB7CiAgICAgICAgICAgIHRoaXMucGxheWVyLnBsYXkoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0sCiAgICAgIGxvYWRDdXJyZW50U3RlcDogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwID09IHRoaXMuZXhwZXJpbWVudGFsU2V0dXAubGVuZ3RoKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnRmluaXNoZWQgdGhlIHNlcXVlbmNlJyk7CiAgICAgICAgICB0aGlzLiRzYXZlQWN0aW9uKCdmaW5pc2hlZF9leHBlcmltZW50Jyk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL3RoYW5rLXlvdScpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLnNjcmF0Y2hwYWQgPSAnJzsKICAgICAgICAgIHRoaXMuJHNhdmVBY3Rpb24oJ3N0YXJ0ZWRfdmlkZW8nLCB7CiAgICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgICAgdmlkZW86CiAgICAgICAgICAgICAgdGhpcy5leHBlcmltZW50YWxTZXR1cFt0aGlzLmxhdGluU3F1YXJlW3RoaXMuY3VycmVudFN0ZXBdXS50aXRsZSwKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gbG9hZHMgY3VycmVudCB2aWRlby4uLgogICAgICAgICAgdGhpcy5wbGF5ZXIuc3JjKHsKICAgICAgICAgICAgc3JjOiB0aGlzLmV4cGVyaW1lbnRhbFNldHVwW3RoaXMubGF0aW5TcXVhcmVbdGhpcy5jdXJyZW50U3RlcF1dCiAgICAgICAgICAgICAgLnZpZGVvX3VybCwKICAgICAgICAgICAgdHlwZTogJ3ZpZGVvL21wNCcsCiAgICAgICAgICB9KTsKICAgICAgICAgIGxldCBzZWFyY2hQYW5lbCA9IHRoaXMuJHJlZnMuc2VhcmNoLAogICAgICAgICAgICB0aW1lbGluZSA9IHRoaXMuJHJlZnMudGltZWxpbmU7CiAgICAgICAgICBzZWFyY2hQYW5lbC5yZXNldFJlc3VsdHMoKTsKICAgICAgICAgIHRpbWVsaW5lLnJlc2V0U2VsZWN0aW9uKCk7CiAgICAgICAgICAvLyAuLi5hbmQgY3VycmVudCBwcmUtY29tcHV0ZWQgc2VhcmNoIHJlc3VsdHMKICAgICAgICAgIGZldGNoKAogICAgICAgICAgICB0aGlzLmV4cGVyaW1lbnRhbFNldHVwW3RoaXMubGF0aW5TcXVhcmVbdGhpcy5jdXJyZW50U3RlcF1dLnNpZ25zX2RhdGEsCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vdGV4dCcsCiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgfQogICAgICAgICAgKQogICAgICAgICAgICAudGhlbigocmVzcG9uc2UpID0+IHJlc3BvbnNlLnRleHQoKSkKICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgICAgICB0aGlzLnNpZ25zID0gSlNPTi5wYXJzZShkYXRhKS5zaWduczsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4gewogICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9LAogICAgICBhZHZhbmNlU3RlcDogZnVuY3Rpb24gKCkgewogICAgICAgIHRoaXMuY3VycmVudFN0ZXAgKz0gMTsKICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCd2aWRlbycpLmZvckVhY2godmlkID0+IHZpZC5wYXVzZSgpKTsKICAgICAgICB0aGlzLiRzYXZlQWN0aW9uKCduZXh0X3ZpZGVvJywgeyBzY3JhdGNocGFkOiB0aGlzLnNjcmF0Y2hwYWQgfSk7CiAgICAgICAgdGhpcy5sb2FkQ3VycmVudFN0ZXAoKTsKICAgICAgfSwKICAgICAgaGFuZGxlVXBsb2FkQ2xpY2soKSB7CiAgICAgICAgdGhpcy4kcmVmcy5maWxlSW5wdXQuY2xpY2soKTsgLy8gVHJpZ2dlciB0aGUgZmlsZSBpbnB1dAogICAgICAgIH0sCiAgICAgICAgaGFuZGxlRmlsZVVwbG9hZChldmVudCkgewogICAgICAgIGNvbnN0IGZpbGUgPSBldmVudC50YXJnZXQuZmlsZXNbMF07CiAgICAgICAgLy8gUHJvY2VzcyB0aGUgZmlsZSB1cGxvYWQgaGVyZQogICAgICAgIC8vIFBhc3MgaXQgdG8gYSB2aWRlbyBwbGF5ZXIgb3IgdXBsb2FkIGl0IHRvIGEgc2VydmVyPwogICAgICAgIH0sCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgZnJhbWVCYXNlTmFtZTogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy5leHBlcmltZW50YWxTZXR1cCB8fCAhdGhpcy5sYXRpblNxdWFyZSkgewogICAgICAgICAgcmV0dXJuICdmcmFtZSc7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLmV4cGVyaW1lbnRhbFNldHVwW3RoaXMubGF0aW5TcXVhcmVbdGhpcy5jdXJyZW50U3RlcF1dCiAgICAgICAgICAuZnJhbWVfYmFzZV9uYW1lOwogICAgICB9LAogICAgICBmcmFtZU51bWJlcjogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy5leHBlcmltZW50YWxTZXR1cCB8fCAhdGhpcy5sYXRpblNxdWFyZSkgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJzZUludCgKICAgICAgICAgIHRoaXMuZXhwZXJpbWVudGFsU2V0dXBbdGhpcy5sYXRpblNxdWFyZVt0aGlzLmN1cnJlbnRTdGVwXV0uZnJhbWVfbnVtYmVyCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgbmV4dFN0ZXBUZXh0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLmV4cGVyaW1lbnRhbFNldHVwIHx8ICF0aGlzLmxhdGluU3F1YXJlKSB7CiAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwIDwgdGhpcy5leHBlcmltZW50YWxTZXR1cC5sZW5ndGggLSAxKSB7CiAgICAgICAgICByZXR1cm4gJ05leHQgdmlkZW8nOwogICAgICAgIH0KICAgICAgICByZXR1cm4gJ0ZpbmlzaCBleHBlcmltZW50JzsKICAgICAgfSwKICAgICAgcGxheWluZ1NlbGVjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgIGlmICghdGhpcy5wbGF5aW5nIHx8IHRoaXMuY3VycmVudFBlcmNlbnRhZ2UgPT0gLTEpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuICgKICAgICAgICAgIHRoaXMuY3VycmVudFBlcmNlbnRhZ2UgPj0gdGhpcy50aW1lbGluZVNlbGVjdGlvbi5zdGFydCAmJgogICAgICAgICAgdGhpcy5jdXJyZW50UGVyY2VudGFnZSA8PSB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLmVuZAogICAgICAgICk7CiAgICAgIH0sCiAgICAgIGN1cnJlbnRUaW1lOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXIuY3VycmVudFRpbWUoKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIDE7CiAgICAgIH0sCiAgICAgIGN1cnJlbnRQZXJjZW50YWdlOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKCF0aGlzLnBsYXllcikgewogICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXIuY3VycmVudFRpbWUoKSAvIHRoaXMucGxheWVyLmR1cmF0aW9uKCk7CiAgICAgIH0sCiAgICAgIGR1cmF0aW9uOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgaWYgKHRoaXMucGxheWVyKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wbGF5ZXIuZHVyYXRpb24oKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIC0xOwogICAgICB9LAogICAgICBzZWxlY3Rpb25TdGFydDogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiB0aGlzLnRpbWVsaW5lU2VsZWN0aW9uLnN0YXJ0ICogdGhpcy5kdXJhdGlvbjsKICAgICAgfSwKICAgICAgc2VsZWN0aW9uRW5kOiBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudGltZWxpbmVTZWxlY3Rpb24uZW5kICogdGhpcy5kdXJhdGlvbjsKICAgICAgfSwKICAgICAgdGlja0luc2lkZVNlbGVjdGlvbjogZnVuY3Rpb24gKCkgewogICAgICAgIHJldHVybiAoCiAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID49IHRoaXMuc2VsZWN0aW9uU3RhcnQgJiYKICAgICAgICAgIHRoaXMuY3VycmVudFRpbWUgPD0gdGhpcy5zZWxlY3Rpb25FbmQKICAgICAgICApOwogICAgICB9LAogICAgfSwKICAgIG1vdW50ZWQoKSB7CiAgICAgIGZldGNoKCcvZGF0YS9leHBlcmltZW50X3NldHVwLmpzb24nLCB7CiAgICAgICAgbWV0aG9kOiAnR0VUJywKICAgICAgICBoZWFkZXJzOiB7CiAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3RleHQnLAogICAgICAgIH0sCiAgICAgIH0pCiAgICAgICAgLnRoZW4oKHJlc3BvbnNlKSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAgICAgLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICAgIHRoaXMuZXhwZXJpbWVudGFsU2V0dXAgPSBKU09OLnBhcnNlKGRhdGEpLnN0ZXBzOwogICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbignZW50ZXJlZF9leHBlcmltZW50Jyk7CiAgCiAgICAgICAgICAvLyBjcmVhdGVzIGEgbGF0aW4gc3F1YXJlIHRoYXQgaXMgYWx3YXlzIHRoZSBzYW1lIGZvciB0aGlzIHVzZXIKICAgICAgICAgIC8vIGZpcnN0LCBmaW5kcyB0aGUgZmlyc3QgbnVtYmVyIGluIHRoZSB1aWQuCiAgICAgICAgICBsZXQgZm91bmQgPSBmYWxzZSwKICAgICAgICAgICAgb2Zmc2V0LAogICAgICAgICAgICBpID0gMDsKICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuJHVpZCk7CiAgICAgICAgICB3aGlsZSAoIWZvdW5kKSB7CiAgICAgICAgICAgIGlmIChpc05hTihwYXJzZUludCh0aGlzLiR1aWRbaV0pKSAmJiBpIDwgdGhpcy4kdWlkLmxlbmd0aCkgewogICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBmb3VuZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIC8vIHRoZXJlIHdlcmUgbm8gbnVtYmVycyBpbnNpZGUgdGhlIHVpZCAodmVyeSB1bmxpa2VseSEpLCBzbwogICAgICAgICAgLy8gd2lsbCBkZWZhdWx0IHRvIDAKICAgICAgICAgIGlmIChpID09IHRoaXMuJHVpZC5sZW5ndGgpIHsKICAgICAgICAgICAgb2Zmc2V0ID0gMDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIG9mZnNldCA9IHBhcnNlSW50KHRoaXMuJHVpZFtpXSk7CiAgICAgICAgICB9CiAgCiAgICAgICAgICB0aGlzLmxhdGluU3F1YXJlLnB1c2goMCk7CiAgICAgICAgICBsZXQgcyA9ICcwICc7CiAgCiAgICAgICAgICAvLyBza2lwcyAwLCB3aGljaCBpcyB0aGUgZGVtby4gVGhpcydsbCBhbHdheXMgYmUgdGhlIGZpcnN0IHZpZGVvLgogICAgICAgICAgZm9yIChsZXQgaSA9IDE7IGkgPCB0aGlzLmV4cGVyaW1lbnRhbFNldHVwLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIHRoaXMubGF0aW5TcXVhcmUucHVzaCgKICAgICAgICAgICAgICAoKGkgKyBvZmZzZXQpICUgKHRoaXMuZXhwZXJpbWVudGFsU2V0dXAubGVuZ3RoIC0gMSkpICsgMQogICAgICAgICAgICApOwogICAgICAgICAgICBzICs9IHRoaXMubGF0aW5TcXVhcmVbaV0gKyAnICc7CiAgICAgICAgICB9CiAgCiAgICAgICAgICBjb25zb2xlLmxvZyhgaW5kZXhlczogJHtzfWApOwogICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbignY3JlYXRlZF9sYXRpbl9zcXVhcmUnLCB7CiAgICAgICAgICAgIGxhdGluX3NxdWFyZTogdGhpcy5sYXRpblNxdWFyZSwKICAgICAgICAgICAgb2Zmc2V0X3VzZWQ6IG9mZnNldCwKICAgICAgICAgIH0pOwogIAogICAgICAgICAgdGhpcy5sb2FkQ3VycmVudFN0ZXAoKTsKICAgICAgICB9KQogICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yOicsIGVycm9yKTsKICAgICAgICB9KTsKICAgICAgdGhpcy5wbGF5ZXIgPSB2aWRlb2pzKHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIsIHRoaXMub3B0aW9ucywgKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMudmlkZW9QbGF5ZXIuYWRkRXZlbnRMaXN0ZW5lcigncGxheScsICgpID0+IHsKICAgICAgICAgIHRoaXMucGxheWluZyA9IHRydWU7CiAgICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICBpZiAoCiAgICAgICAgICAgICAgdGhpcy5zdG9wQXRTZWxlY3Rpb24gJiYKICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRUaW1lID4gdGhpcy5zZWxlY3Rpb25FbmQgJiYKICAgICAgICAgICAgICB0aGlzLnBsYXllcgogICAgICAgICAgICApIHsKICAgICAgICAgICAgICB0aGlzLnBsYXllci5wYXVzZSgpOwogICAgICAgICAgICAgIHRoaXMucGxheWluZyA9IGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLnBsYXllci5wYXVzZWQoKSAmJiB0aGlzLmludGVydmFsKSB7CiAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnZpZGVvUG9zaXRpb24gPSB0aGlzLmN1cnJlbnRUaW1lIC8gdGhpcy5kdXJhdGlvbjsKICAgICAgICAgIH0sIDYwKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRyZWZzLnZpZGVvUGxheWVyLmFkZEV2ZW50TGlzdGVuZXIoJ3BhdXNlJywgKCkgPT4gewogICAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwpIHsKICAgICAgICAgICAgdGhpcy4kc2F2ZUFjdGlvbignZW5kX29mX3ZpZGVvJywgewogICAgICAgICAgICAgIGN1cnJlbnRfc3RlcDogdGhpcy5jdXJyZW50U3RlcCwKICAgICAgICAgICAgICBwb3NpdGlvbjogdGhpcy52aWRlb1Bvc2l0aW9uLAogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTsKICAgICAgICAgICAgdGhpcy5wbGF5aW5nID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGJlZm9yZURlc3Ryb3koKSB7CiAgICAgIGlmICh0aGlzLnBsYXllcikgewogICAgICAgIHRoaXMucGxheWVyLmRpc3Bvc2UoKTsKICAgICAgfQogICAgfSwKICB9OwogIA=="},{"version":3,"sources":["SpanSelection.vue"],"names":[],"mappings":";AAwDA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SpanSelection.vue","sourceRoot":"src/views","sourcesContent":["<template>\n    <div id=\"span-selection\">\n      <header>\n        <h1>Video {{ currentStep }}</h1>\n        <div id=\"next-video\">\n          <custom-button size=\"small\" :has-border=\"true\" @clicked=\"advanceStep()\"\n            >{{ nextStepText }}\n          </custom-button>\n        </div>\n      </header>\n      <div id=\"video-container\">\n        <video ref=\"videoPlayer\" class=\"video-js\"></video>\n      </div>\n      <div id=\"scratchpad\">\n        <textarea\n          v-model=\"scratchpad\"\n          placeholder=\"Write the video's translation here...\"\n        ></textarea>\n      </div>\n      <div id=\"timeline-container\">\n        <timeline\n          :position=\"videoPosition\"\n          :playing=\"playing\"\n          :duration=\"duration\"\n          :frame-base-name=\"frameBaseName\"\n          :frame-number=\"frameNumber\"\n          ref=\"timeline\"\n          @change=\"updateSelection($event)\"\n          @change-position=\"changeTick\"\n        />\n      </div>\n      <div id=\"video-controls-container\">\n        <video-controls\n            :playing=\"playing\"\n            :playingSelection=\"playingSelection\"\n            :currentTime=\"currentTime\"\n            :duration=\"duration\"\n            @general-play=\"generalPlay()\"\n            @selection-play=\"selectionPlay()\"\n            @upload-video=\"handleUploadClick\"\n            />\n            <input type=\"file\" ref=\"fileInput\" @change=\"handleFileUpload\" hidden />\n        </div>\n      <div id=\"search-panel\">\n        <search\n          ref=\"search\"\n          :selection=\"timelineSelection\"\n          :duration=\"duration\"\n          :currentStep=\"currentStep\"\n          :signs=\"signs\"\n        />\n      </div>\n    </div>\n  </template>\n  \n  <script>\n  import videojs from 'video.js';\n  import Timeline from '../components/Timeline.vue';\n  import VideoControls from '../components/VideoControls.vue';\n  import Search from '../components/Search.vue';\n  import CustomButton from '../components/CustomButton.vue';\n  \n  export default {\n    name: 'SpanSelection',\n    components: { Timeline, VideoControls, Search, CustomButton },\n    props: {\n      options: {\n        type: Object,\n        default() {\n          return {\n            autoplay: false,\n            controls: false,\n            fill: true,\n            sources: [],\n          };\n        },\n      },\n    },\n    data() {\n      return {\n        playing: false,\n        showResults: false,\n        interval: null,\n        timelineSelection: { start: 0, end: 1 },\n        player: null,\n        stopAtSelection: false,\n        videoPosition: 0,\n        experimentalSetup: null,\n        currentStep: 0,\n        scratchpad: '',\n        signs: [],\n        latinSquare: [],\n      };\n    },\n    methods: {\n      updateSelection: function (newBoundaries) {\n        if (\n          this.timelineSelection.start != newBoundaries.start ||\n          this.timelineSelection.end != newBoundaries.end\n        ) {\n          this.timelineSelection = newBoundaries;\n          this.$saveAction('update_selection', {\n            current_step: this.currentStep,\n            start: this.timelineSelection.start * this.duration,\n            end: this.timelineSelection.end * this.duration,\n          });\n        }\n      },\n      changeTick: function (newPosition) {\n        this.player.currentTime(newPosition * this.duration);\n        this.videoPosition = newPosition;\n        this.$saveAction('new_position', {\n          current_step: this.currentStep,\n          position: this.videoPosition * this.duration,\n        });\n      },\n      generalPlay: function () {\n        if (this.player) {\n          if (this.playing) {\n            this.player.pause();\n            this.$saveAction('pause_click', {\n              current_step: this.currentStep,\n              position: this.videoPosition,\n            });\n          } else {\n            this.player.play();\n            this.stopAtSelection = false;\n            this.$saveAction('play_click', {\n              current_step: this.currentStep,\n              position: this.videoPosition,\n            });\n          }\n        }\n      },\n      selectionPlay: function () {\n        if (this.player) {\n          this.$saveAction('play_selection_click', {\n            current_step: this.currentStep,\n            position: this.videoPosition,\n          });\n          this.player.currentTime(this.selectionStart);\n          this.stopAtSelection = true;\n          if (!this.playing) {\n            this.player.play();\n          }\n        }\n      },\n      loadCurrentStep: function () {\n        if (this.currentStep == this.experimentalSetup.length) {\n          console.log('Finished the sequence');\n          this.$saveAction('finished_experiment');\n          this.$router.push('/thank-you');\n        } else {\n          this.scratchpad = '';\n          this.$saveAction('started_video', {\n            current_step: this.currentStep,\n            video:\n              this.experimentalSetup[this.latinSquare[this.currentStep]].title,\n          });\n          // loads current video...\n          this.player.src({\n            src: this.experimentalSetup[this.latinSquare[this.currentStep]]\n              .video_url,\n            type: 'video/mp4',\n          });\n          let searchPanel = this.$refs.search,\n            timeline = this.$refs.timeline;\n          searchPanel.resetResults();\n          timeline.resetSelection();\n          // ...and current pre-computed search results\n          fetch(\n            this.experimentalSetup[this.latinSquare[this.currentStep]].signs_data,\n            {\n              method: 'GET',\n              headers: {\n                'Content-Type': 'application/text',\n              },\n            }\n          )\n            .then((response) => response.text())\n            .then((data) => {\n              this.signs = JSON.parse(data).signs;\n            })\n            .catch((error) => {\n              console.error('Error:', error);\n            });\n        }\n      },\n      advanceStep: function () {\n        this.currentStep += 1;\n        document.querySelectorAll('video').forEach(vid => vid.pause());\n        this.$saveAction('next_video', { scratchpad: this.scratchpad });\n        this.loadCurrentStep();\n      },\n      handleUploadClick() {\n        this.$refs.fileInput.click(); // Trigger the file input\n        },\n        handleFileUpload(event) {\n        const file = event.target.files[0];\n        // Process the file upload here\n        // Pass it to a video player or upload it to a server?\n        },\n    },\n    computed: {\n      frameBaseName: function () {\n        if (!this.experimentalSetup || !this.latinSquare) {\n          return 'frame';\n        }\n        return this.experimentalSetup[this.latinSquare[this.currentStep]]\n          .frame_base_name;\n      },\n      frameNumber: function () {\n        if (!this.experimentalSetup || !this.latinSquare) {\n          return 1;\n        }\n        return parseInt(\n          this.experimentalSetup[this.latinSquare[this.currentStep]].frame_number\n        );\n      },\n      nextStepText: function () {\n        if (!this.experimentalSetup || !this.latinSquare) {\n          return '';\n        }\n        if (this.currentStep < this.experimentalSetup.length - 1) {\n          return 'Next video';\n        }\n        return 'Finish experiment';\n      },\n      playingSelection: function () {\n        if (!this.playing || this.currentPercentage == -1) {\n          return false;\n        }\n        return (\n          this.currentPercentage >= this.timelineSelection.start &&\n          this.currentPercentage <= this.timelineSelection.end\n        );\n      },\n      currentTime: function () {\n        if (this.player) {\n          return this.player.currentTime();\n        }\n        return 1;\n      },\n      currentPercentage: function () {\n        if (!this.player) {\n          return -1;\n        }\n        return this.player.currentTime() / this.player.duration();\n      },\n      duration: function () {\n        if (this.player) {\n          return this.player.duration();\n        }\n        return -1;\n      },\n      selectionStart: function () {\n        return this.timelineSelection.start * this.duration;\n      },\n      selectionEnd: function () {\n        return this.timelineSelection.end * this.duration;\n      },\n      tickInsideSelection: function () {\n        return (\n          this.currentTime >= this.selectionStart &&\n          this.currentTime <= this.selectionEnd\n        );\n      },\n    },\n    mounted() {\n      fetch('/data/experiment_setup.json', {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/text',\n        },\n      })\n        .then((response) => response.text())\n        .then((data) => {\n          this.experimentalSetup = JSON.parse(data).steps;\n          this.$saveAction('entered_experiment');\n  \n          // creates a latin square that is always the same for this user\n          // first, finds the first number in the uid.\n          let found = false,\n            offset,\n            i = 0;\n          console.log(this.$uid);\n          while (!found) {\n            if (isNaN(parseInt(this.$uid[i])) && i < this.$uid.length) {\n              i++;\n            } else {\n              found = true;\n            }\n          }\n          // there were no numbers inside the uid (very unlikely!), so\n          // will default to 0\n          if (i == this.$uid.length) {\n            offset = 0;\n          } else {\n            offset = parseInt(this.$uid[i]);\n          }\n  \n          this.latinSquare.push(0);\n          let s = '0 ';\n  \n          // skips 0, which is the demo. This'll always be the first video.\n          for (let i = 1; i < this.experimentalSetup.length; i++) {\n            this.latinSquare.push(\n              ((i + offset) % (this.experimentalSetup.length - 1)) + 1\n            );\n            s += this.latinSquare[i] + ' ';\n          }\n  \n          console.log(`indexes: ${s}`);\n          this.$saveAction('created_latin_square', {\n            latin_square: this.latinSquare,\n            offset_used: offset,\n          });\n  \n          this.loadCurrentStep();\n        })\n        .catch((error) => {\n          console.error('Error:', error);\n        });\n      this.player = videojs(this.$refs.videoPlayer, this.options, () => {\n        this.$refs.videoPlayer.addEventListener('play', () => {\n          this.playing = true;\n          this.interval = setInterval(() => {\n            if (\n              this.stopAtSelection &&\n              this.currentTime > this.selectionEnd &&\n              this.player\n            ) {\n              this.player.pause();\n              this.playing = false;\n            }\n            if (this.player.paused() && this.interval) {\n              clearInterval(this.interval);\n            }\n            this.videoPosition = this.currentTime / this.duration;\n          }, 60);\n        });\n        this.$refs.videoPlayer.addEventListener('pause', () => {\n          if (this.interval) {\n            this.$saveAction('end_of_video', {\n              current_step: this.currentStep,\n              position: this.videoPosition,\n            });\n            clearInterval(this.interval);\n            this.playing = false;\n          }\n        });\n      });\n    },\n    beforeDestroy() {\n      if (this.player) {\n        this.player.dispose();\n      }\n    },\n  };\n  </script>\n  \n  <style src=\"video.js/dist/video-js.css\"></style>\n  <style lang=\"scss\">\n  @import '@/assets/styles/_mixins.scss';\n  @import '@/assets/styles/_variables.scss';\n  \n  $header_height: 48px;\n  $timeline_height: 96px;\n  $videocontrol_height: 60px;\n  $scratchpad_height: 84px;\n  $general_padding: 6px;\n  \n  header {\n    grid-column: 1/ -1;\n    display: grid;\n    align-items: center;\n    grid-template-columns: max-content max-content auto max-content;\n    gap: 0.5rem;\n    padding-left: 12px;\n    padding-right: 12px;\n    padding-bottom: $general_padding;\n  \n    h1,\n    h2 {\n      color: white;\n      @include fs(1);\n    }\n    h1 {\n      font-weight: 700;\n    }\n    h2 {\n      font-weight: 400;\n    }\n    #next-video {\n      grid-column: 4;\n    }\n  }\n  \n  #span-selection {\n    display: grid;\n    grid-template-rows:\n      $header_height\n      calc(\n        100vh - #{$header_height + $timeline_height + $videocontrol_height +\n          $scratchpad_height + 2 * $general_padding}\n      )\n      $scratchpad_height\n      $timeline_height $videocontrol_height;\n    grid-template-columns: auto 576px;\n  \n    background-color: black;\n    padding: $general_padding;\n  }\n  \n  #video-container {\n    grid-column: 1;\n    border: 1px solid #333;\n    margin: 0 12px 12px 12px;\n  }\n  \n  #video-controls-container {\n    grid-column: 1 / -1;\n    background-color: #333;\n    position: relative;\n  }\n  \n  #timeline-container {\n    display: grid;\n    background-color: #000;\n    padding: 12px;\n  \n    grid-column: 1 / -1;\n  }\n  \n  #scratchpad {\n    margin: 0 12px 24px 12px;\n    display: grid;\n    textarea {\n      border-radius: 0.5rem;\n      padding: 12px;\n      @include fs(0);\n      resize: none;\n    }\n  }\n  \n  #search-panel {\n    background-color: $very-light-accent;\n    border-radius: 4px;\n    grid-row: 2 / span 2;\n    grid-column: 2;\n  \n    overflow-y: scroll;\n  \n    margin-bottom: 24px;\n    margin-right: 12px;\n    padding: 12px;\n  \n    display: grid;\n    grid-gap: 1rem;\n    grid-template-rows: min-content auto;\n  }\n  \n  #results {\n    font-weight: 550;\n  \n    .result {\n      background-color: rgba(255, 255, 255, 0.25);\n      padding: 0.5rem 1rem;\n      display: grid;\n      grid-template-columns: 70% 30%;\n      align-items: center;\n      font-size: 14px;\n      color: white;\n  \n      &.header {\n        background-color: transparent;\n        font-size: 10px;\n        text-transform: uppercase;\n        letter-spacing: 0.1ch;\n        color: rgba(255, 255, 255, 0.8);\n      }\n      &:not(.header) {\n        margin-top: 2px;\n        border-radius: 0.125rem;\n      }\n      .signs {\n      }\n      .certainty {\n        span {\n          background-color: white;\n          height: 0.5rem;\n          display: block;\n        }\n      }\n    }\n  }\n  </style>"]}]}